import{s as P,n as C,A as I,B as J,C as Z,D as U,e as k,a as E,p as M,c as v,E as X,g as S,b as B,f as _,v as H,i as g,h as A,F,k as $,r as ee,G as Q,t as q,d as L}from"../chunks/scheduler.qgu3jX-3.js";import{S as V,i as W,b as te,d as ne,m as le,t as se,a as oe,e as ae}from"../chunks/index.1MBy2nZE.js";import{p as ce}from"../chunks/stores.nhOm1uto.js";function N(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function ie(s){let e,i;return{c:C,l:C,m(l,t){e||(i=[I(document.body,"keyup",s[8]),I(document.body,"keyup",s[10]),I(document.body,"keydown",s[9]),I(document.body,"keydown",s[11])],e=!0)},p:C,i:C,o:C,d(l){e=!1,J(i)}}}function re(s,e,i){let l,t,{paused:u=!1}=e,{pauseOnInput:o=!1}=e,{separator:a="-"}=e;const n=Z();let p=[],c=[];function b(f){U.call(this,s,f)}function T(f){U.call(this,s,f)}const h=({key:f})=>{i(4,c=c.filter(y=>y!==f)),!(c.length>0)&&i(2,p=[])},m=({key:f,target:y})=>{o&&y.tagName!=="BODY"||(i(4,c=[...c,f]),u||(f in t?n("combo",l):i(2,p=[...p,f]),n(f===" "?"Space":f),n("key",f)))};return s.$$set=f=>{"paused"in f&&i(0,u=f.paused),"pauseOnInput"in f&&i(1,o=f.pauseOnInput),"separator"in f&&i(7,a=f.separator)},s.$$.update=()=>{s.$$.dirty&132&&i(3,l=p.join(a)),s.$$.dirty&4&&i(5,t=p.reduce((f,y)=>({...f,[y]:!0}),{})),s.$$.dirty&12&&p.length>0&&n("combo",l)},[u,o,p,l,c,t,n,a,b,T,h,m]}class ue extends V{constructor(e){super(),W(this,e,re,ie,P,{paused:0,pauseOnInput:1,separator:7})}}function K(s,e,i){const l=s.slice();return l[10]=e[i][0],l[11]=e[i][1],l}function R(s,e,i){const l=s.slice();return l[14]=e[i],l}function x(s){let e,i=s[14].TTL+"",l,t,u=s[14].data+"",o;return{c(){e=k("li"),l=q(i),t=q(", "),o=q(u),this.h()},l(a){e=v(a,"LI",{class:!0});var n=B(e);l=L(n,i),t=L(n,", "),o=L(n,u),n.forEach(_),this.h()},h(){H(e,"class","svelte-1i57sni")},m(a,n){g(a,e,n),A(e,l),A(e,t),A(e,o)},p:C,d(a){a&&_(e)}}}function z(s){let e,i=s[10]+"",l,t,u,o=N(s[11]),a=[];for(let n=0;n<o.length;n+=1)a[n]=x(R(s,o,n));return{c(){e=k("h1"),l=q(i),t=E();for(let n=0;n<a.length;n+=1)a[n].c();u=M()},l(n){e=v(n,"H1",{});var p=B(e);l=L(p,i),p.forEach(_),t=S(n);for(let c=0;c<a.length;c+=1)a[c].l(n);u=M()},m(n,p){g(n,e,p),A(e,l),g(n,t,p);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(n,p);g(n,u,p)},p(n,p){if(p&1){o=N(n[11]);let c;for(c=0;c<o.length;c+=1){const b=R(n,o,c);a[c]?a[c].p(b,p):(a[c]=x(b),a[c].c(),a[c].m(u.parentNode,u))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}},d(n){n&&(_(e),_(t),_(u)),Q(a,n)}}}function G(s){let e,i=N([...s[0]]),l=[];for(let t=0;t<i.length;t+=1)l[t]=z(K(s,i,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=M()},l(t){for(let u=0;u<l.length;u+=1)l[u].l(t);e=M()},m(t,u){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,u);g(t,e,u)},p(t,u){if(u&1){i=N([...t[0]]);let o;for(o=0;o<i.length;o+=1){const a=K(t,i,o);l[o]?l[o].p(a,u):(l[o]=z(a),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=i.length}},d(t){t&&_(e),Q(l,t)}}}function he(s){let e,i='This site is built with Svelte as a playground project, which sends request to a DoH server. <a href="https://github.com/richardevs/dns-spa" target="_blank">Source</a>',l,t,u="It queries the common record types for the domain. Format: TTL, value",o,a,n,p,c,b="Summarize",T,h,m,f=s[2],y,j,O,D;h=new ue({}),h.$on("Enter",s[5]);let w=G(s);return{c(){e=k("p"),e.innerHTML=i,l=E(),t=k("p"),t.textContent=u,o=E(),a=k("h1"),n=k("input"),p=E(),c=k("button"),c.textContent=b,T=E(),te(h.$$.fragment),m=E(),w.c(),y=M(),this.h()},l(r){e=v(r,"P",{"data-svelte-h":!0}),X(e)!=="svelte-oc67l7"&&(e.innerHTML=i),l=S(r),t=v(r,"P",{"data-svelte-h":!0}),X(t)!=="svelte-e6nsjt"&&(t.textContent=u),o=S(r),a=v(r,"H1",{});var d=B(a);n=v(d,"INPUT",{placeholder:!0}),p=S(d),c=v(d,"BUTTON",{id:!0,"data-svelte-h":!0}),X(c)!=="svelte-w2llk"&&(c.textContent=b),d.forEach(_),T=S(r),ne(h.$$.fragment,r),m=S(r),w.l(r),y=M(),this.h()},h(){H(n,"placeholder","enter desired domain"),H(c,"id","sum")},m(r,d){g(r,e,d),g(r,l,d),g(r,t,d),g(r,o,d),g(r,a,d),A(a,n),F(n,s[1]),A(a,p),A(a,c),g(r,T,d),le(h,r,d),g(r,m,d),w.m(r,d),g(r,y,d),j=!0,O||(D=[I(n,"input",s[4]),I(c,"click",s[3])],O=!0)},p(r,[d]){d&2&&n.value!==r[1]&&F(n,r[1]),d&4&&P(f,f=r[2])?(w.d(1),w=G(r),w.c(),w.m(y.parentNode,y)):w.p(r,d)},i(r){j||(se(h.$$.fragment,r),j=!0)},o(r){oe(h.$$.fragment,r),j=!1},d(r){r&&(_(e),_(l),_(t),_(o),_(a),_(T),_(m),_(y)),ae(h,r),w.d(r),O=!1,J(D)}}}let Y="https://dns.google/resolve?";function pe(s,e,i){let l;$(s,ce,h=>i(6,l=h));let t="",u=0;const o=new Map;ee(()=>{const h=l.url.searchParams.get("query");h&&i(1,t=h)});let a=["SOA","A","AAAA","TXT","MX","NS","CAA"];const n={_dmarc:"TXT",_spf:"TXT","mta-sts":"A","_mta-sts":"TXT","_smtp._tls":"TXT","google._domainkey":"TXT"};async function p(){c(),o.clear();for(const h of a)await fetch(Y+"name="+t+"&type="+h,{headers:{accept:"application/dns-json"}}).then(m=>m.json()).then(m=>{m.Answer&&(o.set(h,m.Answer),console.log("setting",h))}).catch(m=>(console.log(m),[]));for(let h in n)await fetch(Y+"name="+h+"."+t+"&type="+n[h],{headers:{accept:"application/dns-json"}}).then(m=>m.json()).then(m=>{m.Answer&&(o.set(h,m.Answer),console.log("setting",h))}).catch(m=>(console.log(m),[]));i(2,u++,u),console.log("returning.")}function c(){const h=new URL(window.location);h.searchParams.set("query",t),window.history.pushState({},"",h)}function b(){t=this.value,i(1,t)}return[o,t,u,p,b,()=>{var h;(h=document.getElementById("sum"))==null||h.click()}]}class _e extends V{constructor(e){super(),W(this,e,pe,he,P,{apiMap:0})}get apiMap(){return this.$$.ctx[0]}}export{_e as component};
