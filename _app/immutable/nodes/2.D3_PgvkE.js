import{s as X,n as v,p as A,r as G,q as V,v as C,e as E,b as I,w as j,d as S,x as B,j as M,f as q,i as _,y as D,k as g,l as k,z as L,A as J,t as N,h as O}from"../chunks/scheduler.-gP7ZxVZ.js";import{S as Q,i as R,c as W,b as Z,m as x,t as $,a as ee,d as te}from"../chunks/index.DcxVHqMU.js";function H(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ne(l){let t,u;return{c:v,l:v,m(e,n){t||(u=[A(document.body,"keyup",l[8]),A(document.body,"keyup",l[10]),A(document.body,"keydown",l[9]),A(document.body,"keydown",l[11])],t=!0)},p:v,i:v,o:v,d(e){t=!1,G(u)}}}function le(l,t,u){let e,n,{paused:i=!1}=t,{pauseOnInput:a=!1}=t,{separator:s="-"}=t;const o=V();let h=[],c=[];function p(f){C.call(this,l,f)}function d(f){C.call(this,l,f)}const y=({key:f})=>{u(4,c=c.filter(w=>w!==f)),!(c.length>0)&&u(2,h=[])},T=({key:f,target:w})=>{a&&w.tagName!=="BODY"||(u(4,c=[...c,f]),i||(f in n?o("combo",e):u(2,h=[...h,f]),o(f===" "?"Space":f),o("key",f)))};return l.$$set=f=>{"paused"in f&&u(0,i=f.paused),"pauseOnInput"in f&&u(1,a=f.pauseOnInput),"separator"in f&&u(7,s=f.separator)},l.$$.update=()=>{l.$$.dirty&132&&u(3,e=h.join(s)),l.$$.dirty&4&&u(5,n=h.reduce((f,w)=>({...f,[w]:!0}),{})),l.$$.dirty&12&&h.length>0&&o("combo",e)},[i,a,h,e,c,n,o,s,p,d,y,T]}class se extends Q{constructor(t){super(),R(this,t,le,ne,X,{paused:0,pauseOnInput:1,separator:7})}}function P(l,t,u){const e=l.slice();return e[8]=t[u][0],e[9]=t[u][1],e}function z(l,t,u){const e=l.slice();return e[12]=t[u],e}function K(l){let t,u=l[12].TTL+"",e,n,i=l[12].data+"",a;return{c(){t=E("li"),e=N(u),n=N(", "),a=N(i)},l(s){t=S(s,"LI",{});var o=q(t);e=O(o,u),n=O(o,", "),a=O(o,i),o.forEach(_)},m(s,o){g(s,t,o),k(t,e),k(t,n),k(t,a)},p:v,d(s){s&&_(t)}}}function U(l){let t,u=l[8]+"",e,n,i,a=H(l[9]),s=[];for(let o=0;o<a.length;o+=1)s[o]=K(z(l,a,o));return{c(){t=E("h1"),e=N(u),n=I();for(let o=0;o<s.length;o+=1)s[o].c();i=j()},l(o){t=S(o,"H1",{});var h=q(t);e=O(h,u),h.forEach(_),n=M(o);for(let c=0;c<s.length;c+=1)s[c].l(o);i=j()},m(o,h){g(o,t,h),k(t,e),g(o,n,h);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(o,h);g(o,i,h)},p(o,h){if(h&1){a=H(o[9]);let c;for(c=0;c<a.length;c+=1){const p=z(o,a,c);s[c]?s[c].p(p,h):(s[c]=K(p),s[c].c(),s[c].m(i.parentNode,i))}for(;c<s.length;c+=1)s[c].d(1);s.length=a.length}},d(o){o&&(_(t),_(n),_(i)),J(s,o)}}}function Y(l){let t,u=H([...l[0]]),e=[];for(let n=0;n<u.length;n+=1)e[n]=U(P(l,u,n));return{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=j()},l(n){for(let i=0;i<e.length;i+=1)e[i].l(n);t=j()},m(n,i){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(n,i);g(n,t,i)},p(n,i){if(i&1){u=H([...n[0]]);let a;for(a=0;a<u.length;a+=1){const s=P(n,u,a);e[a]?e[a].p(s,i):(e[a]=U(s),e[a].c(),e[a].m(t.parentNode,t))}for(;a<e.length;a+=1)e[a].d(1);e.length=u.length}},d(n){n&&_(t),J(e,n)}}}function oe(l){let t,u='This site is built with Svelte as a playground project, which sends request to a DoH server. <a href="https://github.com/richardevs/dns-spa">Source</a>',e,n,i,a,s,o="Summarize",h,c,p,d=l[2],y,T,f,w;c=new se({}),c.$on("Enter",l[5]);let b=Y(l);return{c(){t=E("p"),t.innerHTML=u,e=I(),n=E("h1"),i=E("input"),a=I(),s=E("button"),s.textContent=o,h=I(),W(c.$$.fragment),p=I(),b.c(),y=j(),this.h()},l(r){t=S(r,"P",{"data-svelte-h":!0}),B(t)!=="svelte-1ugsivk"&&(t.innerHTML=u),e=M(r),n=S(r,"H1",{});var m=q(n);i=S(m,"INPUT",{placeholder:!0}),a=M(m),s=S(m,"BUTTON",{id:!0,"data-svelte-h":!0}),B(s)!=="svelte-w2llk"&&(s.textContent=o),m.forEach(_),h=M(r),Z(c.$$.fragment,r),p=M(r),b.l(r),y=j(),this.h()},h(){D(i,"placeholder","enter desired domain"),D(s,"id","sum")},m(r,m){g(r,t,m),g(r,e,m),g(r,n,m),k(n,i),L(i,l[1]),k(n,a),k(n,s),g(r,h,m),x(c,r,m),g(r,p,m),b.m(r,m),g(r,y,m),T=!0,f||(w=[A(i,"input",l[4]),A(s,"click",l[3])],f=!0)},p(r,[m]){m&2&&i.value!==r[1]&&L(i,r[1]),m&4&&X(d,d=r[2])?(b.d(1),b=Y(r),b.c(),b.m(y.parentNode,y)):b.p(r,m)},i(r){T||($(c.$$.fragment,r),T=!0)},o(r){ee(c.$$.fragment,r),T=!1},d(r){r&&(_(t),_(e),_(n),_(h),_(p),_(y)),te(c,r),b.d(r),f=!1,G(w)}}}let F="https://cloudflare-dns.com/dns-query?";function ae(l,t,u){let e="",n=0;const i=new Map;let a=["SOA","A","AAAA","TXT","MX","NS"];const s={_dmarc:"TXT",_spf:"TXT","_mta-sts":"TXT","_smtp._tls":"TXT"};async function o(){i.clear();for(const p of a)await fetch(F+"name="+e+"&type="+p,{headers:{accept:"application/dns-json"}}).then(d=>d.json()).then(d=>{d.Answer&&(i.set(p,d.Answer),console.log("setting",p))}).catch(d=>(console.log(d),[]));for(let p in s)await fetch(F+"name="+p+"."+e+"&type="+s[p],{headers:{accept:"application/dns-json"}}).then(d=>d.json()).then(d=>{d.Answer&&(i.set(p,d.Answer),console.log("setting",p))}).catch(d=>(console.log(d),[]));u(2,n++,n),console.log("returning.")}function h(){e=this.value,u(1,e)}return[i,e,n,o,h,()=>{var p;(p=document.getElementById("sum"))==null||p.click()}]}class ue extends Q{constructor(t){super(),R(this,t,ae,oe,X,{apiMap:0})}get apiMap(){return this.$$.ctx[0]}}export{ue as component};
