import{s as D,n as C,A as M,B as Q,C as Z,D as x,e as k,a as E,p as S,c as w,E as H,g as I,b as L,f as _,v as B,i as g,h as v,F,k as $,r as ee,G as R,t as N,d as O}from"../chunks/scheduler.C-ew-y0c.js";import{S as V,i as W,b as te,d as ne,m as le,t as se,a as oe,e as ae}from"../chunks/index.BNhMCZrD.js";import{p as ce}from"../chunks/stores.460staLQ.js";function X(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function ie(s){let e,i;return{c:C,l:C,m(l,t){e||(i=[M(document.body,"keyup",s[8]),M(document.body,"keyup",s[10]),M(document.body,"keydown",s[9]),M(document.body,"keydown",s[11])],e=!0)},p:C,i:C,o:C,d(l){e=!1,Q(i)}}}function re(s,e,i){let l,t,{paused:u=!1}=e,{pauseOnInput:o=!1}=e,{separator:a="-"}=e;const n=Z();let h=[],c=[];function T(f){x.call(this,s,f)}function m(f){x.call(this,s,f)}const p=({key:f})=>{i(4,c=c.filter(b=>b!==f)),!(c.length>0)&&i(2,h=[])},A=({key:f,target:b})=>{o&&b.tagName!=="BODY"||(i(4,c=[...c,f]),u||(f in t?n("combo",l):i(2,h=[...h,f]),n(f===" "?"Space":f),n("key",f)))};return s.$$set=f=>{"paused"in f&&i(0,u=f.paused),"pauseOnInput"in f&&i(1,o=f.pauseOnInput),"separator"in f&&i(7,a=f.separator)},s.$$.update=()=>{s.$$.dirty&132&&i(3,l=h.join(a)),s.$$.dirty&4&&i(5,t=h.reduce((f,b)=>({...f,[b]:!0}),{})),s.$$.dirty&12&&h.length>0&&n("combo",l)},[u,o,h,l,c,t,n,a,T,m,p,A]}class ue extends V{constructor(e){super(),W(this,e,re,ie,D,{paused:0,pauseOnInput:1,separator:7})}}function K(s,e,i){const l=s.slice();return l[9]=e[i][0],l[10]=e[i][1],l}function U(s,e,i){const l=s.slice();return l[13]=e[i],l}function z(s){let e,i=s[13].TTL+"",l,t,u=s[13].data+"",o;return{c(){e=k("li"),l=N(i),t=N(", "),o=N(u),this.h()},l(a){e=w(a,"LI",{class:!0});var n=L(e);l=O(n,i),t=O(n,", "),o=O(n,u),n.forEach(_),this.h()},h(){B(e,"class","svelte-owyhpu")},m(a,n){g(a,e,n),v(e,l),v(e,t),v(e,o)},p:C,d(a){a&&_(e)}}}function G(s){let e,i=s[9]+"",l,t,u,o=X(s[10]),a=[];for(let n=0;n<o.length;n+=1)a[n]=z(U(s,o,n));return{c(){e=k("h1"),l=N(i),t=E();for(let n=0;n<a.length;n+=1)a[n].c();u=S()},l(n){e=w(n,"H1",{});var h=L(e);l=O(h,i),h.forEach(_),t=I(n);for(let c=0;c<a.length;c+=1)a[c].l(n);u=S()},m(n,h){g(n,e,h),v(e,l),g(n,t,h);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(n,h);g(n,u,h)},p(n,h){if(h&1){o=X(n[10]);let c;for(c=0;c<o.length;c+=1){const T=U(n,o,c);a[c]?a[c].p(T,h):(a[c]=z(T),a[c].c(),a[c].m(u.parentNode,u))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}},d(n){n&&(_(e),_(t),_(u)),R(a,n)}}}function Y(s){let e,i=X([...s[0]]),l=[];for(let t=0;t<i.length;t+=1)l[t]=G(K(s,i,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=S()},l(t){for(let u=0;u<l.length;u+=1)l[u].l(t);e=S()},m(t,u){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,u);g(t,e,u)},p(t,u){if(u&1){i=X([...t[0]]);let o;for(o=0;o<i.length;o+=1){const a=K(t,i,o);l[o]?l[o].p(a,u):(l[o]=G(a),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=i.length}},d(t){t&&_(e),R(l,t)}}}function he(s){let e,i='This site is built with Svelte as a playground project, which sends request to a DoH server. <a href="https://github.com/richardevs/dns-spa" target="_blank">Source</a>',l,t,u="It queries the common record types for the domain. Format: TTL, value",o,a,n,h,c,T="Summarize",m,p,A,f=s[2],b,j,q,P;p=new ue({}),p.$on("Enter",s[5]);let y=Y(s);return{c(){e=k("p"),e.innerHTML=i,l=E(),t=k("p"),t.textContent=u,o=E(),a=k("h1"),n=k("input"),h=E(),c=k("button"),c.textContent=T,m=E(),te(p.$$.fragment),A=E(),y.c(),b=S(),this.h()},l(r){e=w(r,"P",{"data-svelte-h":!0}),H(e)!=="svelte-7fpmfx"&&(e.innerHTML=i),l=I(r),t=w(r,"P",{"data-svelte-h":!0}),H(t)!=="svelte-e6nsjt"&&(t.textContent=u),o=I(r),a=w(r,"H1",{});var d=L(a);n=w(d,"INPUT",{placeholder:!0}),h=I(d),c=w(d,"BUTTON",{id:!0,"data-svelte-h":!0}),H(c)!=="svelte-w2llk"&&(c.textContent=T),d.forEach(_),m=I(r),ne(p.$$.fragment,r),A=I(r),y.l(r),b=S(),this.h()},h(){B(n,"placeholder","enter desired domain"),B(c,"id","sum")},m(r,d){g(r,e,d),g(r,l,d),g(r,t,d),g(r,o,d),g(r,a,d),v(a,n),F(n,s[1]),v(a,h),v(a,c),g(r,m,d),le(p,r,d),g(r,A,d),y.m(r,d),g(r,b,d),j=!0,q||(P=[M(n,"input",s[4]),M(c,"click",s[3])],q=!0)},p(r,[d]){d&2&&n.value!==r[1]&&F(n,r[1]),d&4&&D(f,f=r[2])?(y.d(1),y=Y(r),y.c(),y.m(b.parentNode,b)):y.p(r,d)},i(r){j||(se(p.$$.fragment,r),j=!0)},o(r){oe(p.$$.fragment,r),j=!1},d(r){r&&(_(e),_(l),_(t),_(o),_(a),_(m),_(A),_(b)),ae(p,r),y.d(r),q=!1,Q(P)}}}let J="https://dns.google/resolve?";function pe(s,e,i){let l;$(s,ce,m=>i(6,l=m));let t="",u=0;const o=new Map;ee(()=>{const m=l.url.searchParams.get("query");m&&i(1,t=m)});let a=["SOA","A","AAAA","TXT","MX","NS","CAA"];const n={_dmarc:"TXT",_spf:"TXT","mta-sts":"A","_mta-sts":"TXT","_smtp._tls":"TXT","google._domainkey":"TXT"};async function h(){o.clear();for(const m of a)await fetch(J+"name="+t+"&type="+m,{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(o.set(m,p.Answer),console.log("setting",m))}).catch(p=>(console.log(p),[]));for(let m in n)await fetch(J+"name="+m+"."+t+"&type="+n[m],{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(o.set(m,p.Answer),console.log("setting",m))}).catch(p=>(console.log(p),[]));i(2,u++,u),console.log("returning.")}function c(){t=this.value,i(1,t)}return[o,t,u,h,c,()=>{var m;(m=document.getElementById("sum"))==null||m.click()}]}class _e extends V{constructor(e){super(),W(this,e,pe,he,D,{apiMap:0})}get apiMap(){return this.$$.ctx[0]}}export{_e as component};
