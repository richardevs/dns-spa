import{s as D,n as C,A as S,B as Q,C as Z,D as x,e as v,b as E,p as j,d as w,E as q,j as I,f as L,i as _,v as B,k as g,l as k,F,G as R,t as N,h as O}from"../chunks/scheduler.Dlf1Jamc.js";import{S as V,i as W,b as $,d as ee,m as te,t as ne,a as le,e as se}from"../chunks/index.BC6GC6lZ.js";function X(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function oe(s){let t,i;return{c:C,l:C,m(e,l){t||(i=[S(document.body,"keyup",s[8]),S(document.body,"keyup",s[10]),S(document.body,"keydown",s[9]),S(document.body,"keydown",s[11])],t=!0)},p:C,i:C,o:C,d(e){t=!1,Q(i)}}}function ae(s,t,i){let e,l,{paused:r=!1}=t,{pauseOnInput:a=!1}=t,{separator:o="-"}=t;const n=Z();let h=[],c=[];function m(f){x.call(this,s,f)}function p(f){x.call(this,s,f)}const y=({key:f})=>{i(4,c=c.filter(b=>b!==f)),!(c.length>0)&&i(2,h=[])},A=({key:f,target:b})=>{a&&b.tagName!=="BODY"||(i(4,c=[...c,f]),r||(f in l?n("combo",e):i(2,h=[...h,f]),n(f===" "?"Space":f),n("key",f)))};return s.$$set=f=>{"paused"in f&&i(0,r=f.paused),"pauseOnInput"in f&&i(1,a=f.pauseOnInput),"separator"in f&&i(7,o=f.separator)},s.$$.update=()=>{s.$$.dirty&132&&i(3,e=h.join(o)),s.$$.dirty&4&&i(5,l=h.reduce((f,b)=>({...f,[b]:!0}),{})),s.$$.dirty&12&&h.length>0&&n("combo",e)},[r,a,h,e,c,l,n,o,m,p,y,A]}class ce extends V{constructor(t){super(),W(this,t,ae,oe,D,{paused:0,pauseOnInput:1,separator:7})}}function K(s,t,i){const e=s.slice();return e[8]=t[i][0],e[9]=t[i][1],e}function U(s,t,i){const e=s.slice();return e[12]=t[i],e}function z(s){let t,i=s[12].TTL+"",e,l,r=s[12].data+"",a;return{c(){t=v("li"),e=N(i),l=N(", "),a=N(r),this.h()},l(o){t=w(o,"LI",{class:!0});var n=L(t);e=O(n,i),l=O(n,", "),a=O(n,r),n.forEach(_),this.h()},h(){B(t,"class","svelte-owyhpu")},m(o,n){g(o,t,n),k(t,e),k(t,l),k(t,a)},p:C,d(o){o&&_(t)}}}function G(s){let t,i=s[8]+"",e,l,r,a=X(s[9]),o=[];for(let n=0;n<a.length;n+=1)o[n]=z(U(s,a,n));return{c(){t=v("h1"),e=N(i),l=E();for(let n=0;n<o.length;n+=1)o[n].c();r=j()},l(n){t=w(n,"H1",{});var h=L(t);e=O(h,i),h.forEach(_),l=I(n);for(let c=0;c<o.length;c+=1)o[c].l(n);r=j()},m(n,h){g(n,t,h),k(t,e),g(n,l,h);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,h);g(n,r,h)},p(n,h){if(h&1){a=X(n[9]);let c;for(c=0;c<a.length;c+=1){const m=U(n,a,c);o[c]?o[c].p(m,h):(o[c]=z(m),o[c].c(),o[c].m(r.parentNode,r))}for(;c<o.length;c+=1)o[c].d(1);o.length=a.length}},d(n){n&&(_(t),_(l),_(r)),R(o,n)}}}function Y(s){let t,i=X([...s[0]]),e=[];for(let l=0;l<i.length;l+=1)e[l]=G(K(s,i,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=j()},l(l){for(let r=0;r<e.length;r+=1)e[r].l(l);t=j()},m(l,r){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,r);g(l,t,r)},p(l,r){if(r&1){i=X([...l[0]]);let a;for(a=0;a<i.length;a+=1){const o=K(l,i,a);e[a]?e[a].p(o,r):(e[a]=G(o),e[a].c(),e[a].m(t.parentNode,t))}for(;a<e.length;a+=1)e[a].d(1);e.length=i.length}},d(l){l&&_(t),R(e,l)}}}function ie(s){let t,i='This site is built with Svelte as a playground project, which sends request to a DoH server. <a href="https://github.com/richardevs/dns-spa" target="_blank">Source</a>',e,l,r="It quries the common record types for the domain. Format: TTL, value",a,o,n,h,c,m="Summarize",p,y,A,f=s[2],b,M,H,P;y=new ce({}),y.$on("Enter",s[5]);let T=Y(s);return{c(){t=v("p"),t.innerHTML=i,e=E(),l=v("p"),l.textContent=r,a=E(),o=v("h1"),n=v("input"),h=E(),c=v("button"),c.textContent=m,p=E(),$(y.$$.fragment),A=E(),T.c(),b=j(),this.h()},l(u){t=w(u,"P",{"data-svelte-h":!0}),q(t)!=="svelte-7fpmfx"&&(t.innerHTML=i),e=I(u),l=w(u,"P",{"data-svelte-h":!0}),q(l)!=="svelte-1xqv7wa"&&(l.textContent=r),a=I(u),o=w(u,"H1",{});var d=L(o);n=w(d,"INPUT",{placeholder:!0}),h=I(d),c=w(d,"BUTTON",{id:!0,"data-svelte-h":!0}),q(c)!=="svelte-w2llk"&&(c.textContent=m),d.forEach(_),p=I(u),ee(y.$$.fragment,u),A=I(u),T.l(u),b=j(),this.h()},h(){B(n,"placeholder","enter desired domain"),B(c,"id","sum")},m(u,d){g(u,t,d),g(u,e,d),g(u,l,d),g(u,a,d),g(u,o,d),k(o,n),F(n,s[1]),k(o,h),k(o,c),g(u,p,d),te(y,u,d),g(u,A,d),T.m(u,d),g(u,b,d),M=!0,H||(P=[S(n,"input",s[4]),S(c,"click",s[3])],H=!0)},p(u,[d]){d&2&&n.value!==u[1]&&F(n,u[1]),d&4&&D(f,f=u[2])?(T.d(1),T=Y(u),T.c(),T.m(b.parentNode,b)):T.p(u,d)},i(u){M||(ne(y.$$.fragment,u),M=!0)},o(u){le(y.$$.fragment,u),M=!1},d(u){u&&(_(t),_(e),_(l),_(a),_(o),_(p),_(A),_(b)),se(y,u),T.d(u),H=!1,Q(P)}}}let J="https://dns.google/resolve?";function ue(s,t,i){let e="",l=0;const r=new Map;let a=["SOA","A","AAAA","TXT","MX","NS","CAA"];const o={_dmarc:"TXT",_spf:"TXT","mta-sts":"A","_mta-sts":"TXT","_smtp._tls":"TXT","google._domainkey":"TXT"};async function n(){r.clear();for(const m of a)await fetch(J+"name="+e+"&type="+m,{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(r.set(m,p.Answer),console.log("setting",m))}).catch(p=>(console.log(p),[]));for(let m in o)await fetch(J+"name="+m+"."+e+"&type="+o[m],{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(r.set(m,p.Answer),console.log("setting",m))}).catch(p=>(console.log(p),[]));i(2,l++,l),console.log("returning.")}function h(){e=this.value,i(1,e)}return[r,e,l,n,h,()=>{var m;(m=document.getElementById("sum"))==null||m.click()}]}class fe extends V{constructor(t){super(),W(this,t,ue,ie,D,{apiMap:0})}get apiMap(){return this.$$.ctx[0]}}export{fe as component};
