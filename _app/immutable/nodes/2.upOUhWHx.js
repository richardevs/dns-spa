import{s as B,n as j,A as O,B as W,C as te,D as U,e as w,a as C,c as T,b as x,E as R,g as I,f as g,v as k,i as q,h as m,F as J,k as ne,r as se,p as D,G as Z,t as N,d as P}from"../chunks/scheduler.qgu3jX-3.js";import{S as $,i as ee,b as le,d as oe,m as ae,t as re,a as ce,e as ue}from"../chunks/index.1MBy2nZE.js";import{g as ie}from"../chunks/entry.BnnE7Cvv.js";import{p as he}from"../chunks/stores.Col9y4uM.js";function X(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function pe(s){let e,t;return{c:j,l:j,m(n,a){e||(t=[O(document.body,"keyup",s[8]),O(document.body,"keyup",s[10]),O(document.body,"keydown",s[9]),O(document.body,"keydown",s[11])],e=!0)},p:j,i:j,o:j,d(n){e=!1,W(t)}}}function fe(s,e,t){let n,a,{paused:i=!1}=e,{pauseOnInput:o=!1}=e,{separator:u="-"}=e;const r=te();let h=[],c=[];function b(l){U.call(this,s,l)}function _(l){U.call(this,s,l)}const S=({key:l})=>{t(4,c=c.filter(p=>p!==l)),!(c.length>0)&&t(2,h=[])},f=({key:l,target:p})=>{o&&p.tagName!=="BODY"||(t(4,c=[...c,l]),i||(l in a?r("combo",n):t(2,h=[...h,l]),r(l===" "?"Space":l),r("key",l)))};return s.$$set=l=>{"paused"in l&&t(0,i=l.paused),"pauseOnInput"in l&&t(1,o=l.pauseOnInput),"separator"in l&&t(7,u=l.separator)},s.$$.update=()=>{s.$$.dirty&132&&t(3,n=h.join(u)),s.$$.dirty&4&&t(5,a=h.reduce((l,p)=>({...l,[p]:!0}),{})),s.$$.dirty&12&&h.length>0&&r("combo",n)},[i,o,h,n,c,a,r,u,b,_,S,f]}class de extends ${constructor(e){super(),ee(this,e,fe,pe,B,{paused:0,pauseOnInput:1,separator:7})}}function K(s,e,t){const n=s.slice();return n[11]=e[t][0],n[12]=e[t][1],n}function V(s,e,t){const n=s.slice();return n[15]=e[t],n}function z(s){let e,t=s[15].TTL+"",n,a,i=s[15].data+"",o;return{c(){e=w("li"),n=N(t),a=N(", "),o=N(i),this.h()},l(u){e=T(u,"LI",{class:!0});var r=x(e);n=P(r,t),a=P(r,", "),o=P(r,i),r.forEach(g),this.h()},h(){k(e,"class","svelte-9xbp36")},m(u,r){q(u,e,r),m(e,n),m(e,a),m(e,o)},p:j,d(u){u&&g(e)}}}function G(s){let e,t=s[11]+"",n,a,i,o=X(s[12]),u=[];for(let r=0;r<o.length;r+=1)u[r]=z(V(s,o,r));return{c(){e=w("h1"),n=N(t),a=C();for(let r=0;r<u.length;r+=1)u[r].c();i=D(),this.h()},l(r){e=T(r,"H1",{class:!0});var h=x(e);n=P(h,t),h.forEach(g),a=I(r);for(let c=0;c<u.length;c+=1)u[c].l(r);i=D(),this.h()},h(){k(e,"class","svelte-9xbp36")},m(r,h){q(r,e,h),m(e,n),q(r,a,h);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(r,h);q(r,i,h)},p(r,h){if(h&1){o=X(r[12]);let c;for(c=0;c<o.length;c+=1){const b=V(r,o,c);u[c]?u[c].p(b,h):(u[c]=z(b),u[c].c(),u[c].m(i.parentNode,i))}for(;c<u.length;c+=1)u[c].d(1);u.length=o.length}},d(r){r&&(g(e),g(a),g(i)),Z(u,r)}}}function Y(s){let e,t=X([...s[0]]),n=[];for(let a=0;a<t.length;a+=1)n[a]=G(K(s,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=D()},l(a){for(let i=0;i<n.length;i+=1)n[i].l(a);e=D()},m(a,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,i);q(a,e,i)},p(a,i){if(i&1){t=X([...a[0]]);let o;for(o=0;o<t.length;o+=1){const u=K(a,t,o);n[o]?n[o].p(u,i):(n[o]=G(u),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(a){a&&g(e),Z(n,a)}}}function me(s){let e,t,n,a='This site is built with Svelte as a playground project, which sends request to a DoH server. <a href="https://github.com/richardevs/dns-spa" target="_blank">Source</a>',i,o,u="It queries the common record types for the domain. Format: TTL, value",r,h,c,b,_,S="Summarize",f,l,p,L=s[2],E,H,F;l=new de({}),l.$on("Enter",s[6]);let v=Y(s);return{c(){e=w("div"),t=w("div"),n=w("p"),n.innerHTML=a,i=C(),o=w("p"),o.textContent=u,r=C(),h=w("h1"),c=w("input"),b=C(),_=w("button"),_.textContent=S,f=C(),le(l.$$.fragment),p=C(),v.c(),this.h()},l(d){e=T(d,"DIV",{class:!0});var A=x(e);t=T(A,"DIV",{class:!0});var y=x(t);n=T(y,"P",{"data-svelte-h":!0}),R(n)!=="svelte-2mkrq9"&&(n.innerHTML=a),i=I(y),o=T(y,"P",{"data-svelte-h":!0}),R(o)!=="svelte-e6nsjt"&&(o.textContent=u),r=I(y),h=T(y,"H1",{class:!0});var M=x(h);c=T(M,"INPUT",{placeholder:!0,class:!0}),b=I(M),_=T(M,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),R(_)!=="svelte-w2llk"&&(_.textContent=S),M.forEach(g),f=I(y),oe(l.$$.fragment,y),p=I(y),v.l(y),y.forEach(g),A.forEach(g),this.h()},h(){k(c,"placeholder","enter desired domain"),k(c,"class","svelte-9xbp36"),k(_,"id","sum"),k(_,"class","svelte-9xbp36"),k(h,"class","svelte-9xbp36"),k(t,"class","card svelte-9xbp36"),k(e,"class","container svelte-9xbp36")},m(d,A){q(d,e,A),m(e,t),m(t,n),m(t,i),m(t,o),m(t,r),m(t,h),m(h,c),J(c,s[1]),m(h,b),m(h,_),m(t,f),ae(l,t,null),m(t,p),v.m(t,null),E=!0,H||(F=[O(c,"input",s[5]),O(_,"click",s[3])],H=!0)},p(d,[A]){A&2&&c.value!==d[1]&&J(c,d[1]),A&4&&B(L,L=d[2])?(v.d(1),v=Y(d),v.c(),v.m(t,null)):v.p(d,A)},i(d){E||(re(l.$$.fragment,d),E=!0)},o(d){ce(l.$$.fragment,d),E=!1},d(d){d&&g(e),ue(l),v.d(d),H=!1,W(F)}}}let Q="https://dns.google/resolve?";function _e(s){const e=JSON.stringify(s);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function ge(s){try{const e=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),t=atob(e);return JSON.parse(t)}catch(e){return console.error("Failed to decode results:",e),{}}}function be(s,e,t){let n;ne(s,he,f=>t(4,n=f));let a="",i=0;const o=new Map;function u(){{const f=n.url.searchParams.get("query"),l=n.url.searchParams.get("results");if(f&&(t(1,a=f),l))try{const p=ge(l);o.clear();for(const[L,E]of Object.entries(p))o.set(L,E);t(2,i++,i)}catch(p){console.error("Failed to parse results:",p)}}}let r;se(()=>{u(),r=async f=>{const l=new URL(window.location);l.searchParams.set("query",a),f&&l.searchParams.set("results",_e(f)),await ie(l.toString(),{replaceState:!1})}});let h=["SOA","A","AAAA","TXT","MX","NS","CAA"];const c={_dmarc:"TXT",_spf:"TXT","mta-sts":"A","_mta-sts":"TXT","_smtp._tls":"TXT","google._domainkey":"TXT"};async function b(){o.clear();const f={};for(const l of h)await fetch(Q+"name="+a+"&type="+l,{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(o.set(l,p.Answer),f[l]=p.Answer,console.log("setting",l))}).catch(p=>(console.log(p),[]));for(let l in c)await fetch(Q+"name="+l+"."+a+"&type="+c[l],{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(o.set(l,p.Answer),f[l]=p.Answer,console.log("setting",l))}).catch(p=>(console.log(p),[]));t(2,i++,i),await r(f)}function _(){a=this.value,t(1,a)}const S=()=>{var f;(f=document.getElementById("sum"))==null||f.click()};return s.$$.update=()=>{s.$$.dirty&16&&(n.url.search,u())},[o,a,i,b,n,_,S]}class ke extends ${constructor(e){super(),ee(this,e,be,me,B,{apiMap:0})}get apiMap(){return this.$$.ctx[0]}}export{ke as component};
