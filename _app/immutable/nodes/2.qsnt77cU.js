import{s as le,n as q,O as D,A as Se,P as De,Q as _e,e as I,a as B,c as O,b as X,R as Q,g as E,f as k,v as w,i as x,h as m,S as ge,k as Re,r as Le,p as te,T as Ie,t as Z,d as $}from"../chunks/scheduler.Cjm7oeRm.js";import{S as Oe,i as Me,b as qe,d as xe,m as Fe,t as Ke,a as Xe,e as He}from"../chunks/index.BJ1bddpV.js";import{g as Ye}from"../chunks/entry.Dt1z0FkH.js";import{p as ze}from"../chunks/stores.BI0idnxz.js";function ne(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Je(e){let t,r;return{c:q,l:q,m(n,o){t||(r=[D(document.body,"keyup",e[8]),D(document.body,"keyup",e[10]),D(document.body,"keydown",e[9]),D(document.body,"keydown",e[11])],t=!0)},p:q,i:q,o:q,d(n){t=!1,Se(r)}}}function Ge(e,t,r){let n,o,{paused:c=!1}=t,{pauseOnInput:s=!1}=t,{separator:a="-"}=t;const i=De();let l=[],u=[];function T(d){_e.call(this,e,d)}function b(d){_e.call(this,e,d)}const R=({key:d})=>{r(4,u=u.filter(h=>h!==d)),!(u.length>0)&&r(2,l=[])},P=({key:d,target:h})=>{s&&h.tagName!=="BODY"||(r(4,u=[...u,d]),c||(d in o?i("combo",n):r(2,l=[...l,d]),i(d===" "?"Space":d),i("key",d)))};return e.$$set=d=>{"paused"in d&&r(0,c=d.paused),"pauseOnInput"in d&&r(1,s=d.pauseOnInput),"separator"in d&&r(7,a=d.separator)},e.$$.update=()=>{e.$$.dirty&132&&r(3,n=l.join(a)),e.$$.dirty&4&&r(5,o=l.reduce((d,h)=>({...d,[h]:!0}),{})),e.$$.dirty&12&&l.length>0&&i("combo",n)},[c,s,l,n,u,o,i,a,T,b,R,P]}class Qe extends Oe{constructor(t){super(),Me(this,t,Ge,Je,le,{paused:0,pauseOnInput:1,separator:7})}}var ae={},N={},j={};Object.defineProperty(j,"__esModule",{value:!0});j.throwUnsupportedData=j.throwUnknownDataType=j.getType=void 0;function Ne(e){return Object.prototype.toString.call(e)}j.getType=Ne;function We(e){throw new TypeError("unsupported data type: "+Ne(e))}j.throwUnknownDataType=We;function Ze(e){throw new TypeError("unsupported data type: "+e)}j.throwUnsupportedData=Ze;var _={},g={};Object.defineProperty(g,"__esModule",{value:!0});g.s_to_num=g.int_str_to_s=g.num_to_s=g.big_int_to_s=g.int_to_s=g.s_to_big_int=g.s_to_int=void 0;let U="";for(let e=0;e<10;e++){const t=String.fromCharCode(48+e);U+=t}for(let e=0;e<26;e++){const t=String.fromCharCode(65+e);U+=t}for(let e=0;e<26;e++){const t=String.fromCharCode(97+e);U+=t}const F=U.length,de={};for(let e=0;e<F;e++){const t=U[e];de[t]=e}function fe(e){let t=0,r=1;for(let n=e.length-1;n>=0;n--){const o=e[n];let c=de[o];c*=r,t+=c,r*=F}return t}g.s_to_int=fe;function je(e){let t=BigInt(0),r=BigInt(1);const n=BigInt(F);for(let o=e.length-1;o>=0;o--){const c=e[o];let s=BigInt(de[c]);s*=r,t+=s,r*=n}return t}g.s_to_big_int=je;function he(e){if(e===0)return U[0];const t=[];for(;e!==0;){const r=e%F,n=U[r];t.push(n),e-=r,e/=F}return t.reverse().join("")}g.int_to_s=he;function Ue(e){const t=BigInt(0),r=BigInt(F);if(e===t)return U[0];const n=[];for(;e!==t;){const o=e%r,c=U[Number(o)];n.push(c),e/=r}return n.reverse().join("")}g.big_int_to_s=Ue;function Ae(e){return e.split("").reverse().join("")}function Pe(e){if(e<0)return"-"+Pe(-e);let[t,r]=e.toString().split(".");if(!r)if(t.includes("e")){const[c,s]=t.split("e");t=c,r="0e"+s}else return he(e);let n;r&&([r,n]=r.split("e")),t=ee(t),r=Ae(r),r=ee(r);let o=t+"."+r;if(n){switch(o+=".",n[0]){case"+":n=n.slice(1);break;case"-":o+="-",n=n.slice(1);break}n=ee(n),o+=n}return o}g.num_to_s=Pe;function ee(e){const t=+e;return t.toString()===e&&t+1!==t&&t-1!==t?he(t):":"+Ue(BigInt(e))}g.int_str_to_s=ee;function oe(e){return e[0]===":"?je(e.substring(1)).toString():fe(e).toString()}function Ce(e){if(e[0]==="-")return-Ce(e.substr(1));let[t,r,n]=e.split(".");if(!r)return fe(t);t=oe(t),r=oe(r),r=Ae(r);let o=t+"."+r;if(n){o+="e";let c=!1;n[0]==="-"&&(c=!0,n=n.slice(1)),n=oe(n),o+=c?-n:+n}return+o}g.s_to_num=Ce;Object.defineProperty(_,"__esModule",{value:!0});_.decodeStr=_.encodeStr=_.decodeBool=_.encodeBool=_.decodeKey=_.decodeNum=_.encodeNum=void 0;const pe=g;function $e(e){return"n|"+(0,pe.num_to_s)(e)}_.encodeNum=$e;function et(e){return e=e.replace("n|",""),(0,pe.s_to_num)(e)}_.decodeNum=et;function tt(e){return typeof e=="number"?e:(0,pe.s_to_int)(e)}_.decodeKey=tt;function nt(e){return e?"b|T":"b|F"}_.encodeBool=nt;function rt(e){switch(e){case"b|T":return!0;case"b|F":return!1}return!!e}_.decodeBool=rt;function ot(e){switch(e[0]+e[1]){case"b|":case"o|":case"n|":case"a|":case"s|":e="s|"+e}return e}_.encodeStr=ot;function ct(e){return e[0]+e[1]==="s|"?e.substr(2):e}_.decodeStr=ct;var v={},z={};Object.defineProperty(z,"__esModule",{value:!0});z.config=void 0;z.config={sort_key:!1,error_on_nan:!1,error_on_infinite:!1};Object.defineProperty(v,"__esModule",{value:!0});v.addValue=v.makeInMemoryMemory=v.makeInMemoryCache=v.makeInMemoryStore=v.memToValues=void 0;const ue=z,ce=j,se=_,st=g;function it(e){return e.store.toArray()}v.memToValues=it;function Ve(){const e=[];return{forEach(t){for(let r=0;r<e.length;r++)if(t(e[r])==="break")return},add(t){e.push(t)},toArray(){return e}}}v.makeInMemoryStore=Ve;function Be(){const e=Object.create(null),t=Object.create(null);return{getValue(r){return e[r]},getSchema(r){return t[r]},forEachValue(r){for(const[n,o]of Object.entries(e))if(r(n,o)==="break")return},forEachSchema(r){for(const[n,o]of Object.entries(t))if(r(n,o)==="break")return},setValue(r,n){e[r]=n},setSchema(r,n){t[r]=n},hasValue(r){return r in e},hasSchema(r){return r in t}}}v.makeInMemoryCache=Be;function at(){return{store:Ve(),cache:Be(),keyCount:0}}v.makeInMemoryMemory=at;function V(e,t){if(e.cache.hasValue(t))return e.cache.getValue(t);const r=e.keyCount++,n=(0,st.num_to_s)(r);return e.store.add(t),e.cache.setValue(t,n),n}function ut(e,t){ue.config.sort_key&&t.sort();const r=t.join(",");if(e.cache.hasSchema(r))return e.cache.getSchema(r);const n=H(e,t,void 0);return e.cache.setSchema(r,n),n}function H(e,t,r){if(t===null)return"";switch(typeof t){case"undefined":if(Array.isArray(r))return H(e,null,r);break;case"object":if(t===null)return V(e,null);if(Array.isArray(t)){let n="a";for(let o=0;o<t.length;o++){const c=t[o],s=c===null?"_":H(e,c,t);n+="|"+s}return n==="a"&&(n="a|"),V(e,n)}else{const n=Object.keys(t);if(n.length===0)return V(e,"o|");let o="o";const c=ut(e,n);o+="|"+c;for(const s of n){const a=t[s],i=H(e,a,t);o+="|"+i}return V(e,o)}case"boolean":return V(e,(0,se.encodeBool)(t));case"number":return Number.isNaN(t)?(ue.config.error_on_nan&&(0,ce.throwUnsupportedData)("[number NaN]"),""):Number.POSITIVE_INFINITY===t||Number.NEGATIVE_INFINITY===t?(ue.config.error_on_infinite&&(0,ce.throwUnsupportedData)("[number Infinity]"),""):V(e,(0,se.encodeNum)(t));case"string":return V(e,(0,se.encodeStr)(t))}return(0,ce.throwUnknownDataType)(t)}v.addValue=H;Object.defineProperty(N,"__esModule",{value:!0});N.decompress=N.decode=N.compress=void 0;const lt=j,W=_,ie=v;function dt(e){const t=(0,ie.makeInMemoryMemory)(),r=(0,ie.addValue)(t,e,void 0);return[(0,ie.memToValues)(t),r]}N.compress=dt;function ft(e,t){if(t==="o|")return{};const r={},n=t.split("|"),o=n[1];let c=Y(e,o);const s=n.length;s-2===1&&!Array.isArray(c)&&(c=[c]);for(let a=2;a<s;a++){const i=c[a-2];let l=n[a];l=Y(e,l),r[i]=l}return r}function ht(e,t){if(t==="a|")return[];const r=t.split("|"),n=r.length-1,o=new Array(n);for(let c=0;c<n;c++){let s=r[c+1];s=Y(e,s),o[c]=s}return o}function Y(e,t){if(t===""||t==="_")return null;const r=(0,W.decodeKey)(t),n=e[r];if(n===null)return n;switch(typeof n){case"undefined":return n;case"number":return n;case"string":switch(n[0]+n[1]){case"b|":return(0,W.decodeBool)(n);case"o|":return ft(e,n);case"n|":return(0,W.decodeNum)(n);case"a|":return ht(e,n);default:return(0,W.decodeStr)(n)}}return(0,lt.throwUnknownDataType)(n)}N.decode=Y;function pt(e){const[t,r]=e;return Y(t,r)}N.decompress=pt;var K={};Object.defineProperty(K,"__esModule",{value:!0});K.trimUndefinedRecursively=K.trimUndefined=void 0;function mt(e){for(const t in e)e[t]===void 0&&delete e[t]}K.trimUndefined=mt;function _t(e){Ee(e,new Set)}K.trimUndefinedRecursively=_t;function Ee(e,t){t.add(e);for(const r in e)if(e[r]===void 0)delete e[r];else{const n=e[r];n&&typeof n=="object"&&!t.has(n)&&Ee(n,t)}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.config=e.trimUndefinedRecursively=e.trimUndefined=e.addValue=e.decode=e.decompress=e.compress=void 0;var t=N;Object.defineProperty(e,"compress",{enumerable:!0,get:function(){return t.compress}}),Object.defineProperty(e,"decompress",{enumerable:!0,get:function(){return t.decompress}});var r=N;Object.defineProperty(e,"decode",{enumerable:!0,get:function(){return r.decode}});var n=v;Object.defineProperty(e,"addValue",{enumerable:!0,get:function(){return n.addValue}});var o=K;Object.defineProperty(e,"trimUndefined",{enumerable:!0,get:function(){return o.trimUndefined}}),Object.defineProperty(e,"trimUndefinedRecursively",{enumerable:!0,get:function(){return o.trimUndefinedRecursively}});var c=z;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return c.config}})})(ae);function ye(e,t,r){const n=e.slice();return n[13]=t[r][0],n[14]=t[r][1],n}function be(e,t,r){const n=e.slice();return n[17]=t[r],n}function ve(e){let t,r=e[17].TTL+"",n,o,c=e[17].data+"",s;return{c(){t=I("li"),n=Z(r),o=Z(", "),s=Z(c),this.h()},l(a){t=O(a,"LI",{class:!0});var i=X(t);n=$(i,r),o=$(i,", "),s=$(i,c),i.forEach(k),this.h()},h(){w(t,"class","svelte-9xbp36")},m(a,i){x(a,t,i),m(t,n),m(t,o),m(t,s)},p:q,d(a){a&&k(t)}}}function we(e){let t,r=e[13]+"",n,o,c,s=ne(e[14]),a=[];for(let i=0;i<s.length;i+=1)a[i]=ve(be(e,s,i));return{c(){t=I("h1"),n=Z(r),o=B();for(let i=0;i<a.length;i+=1)a[i].c();c=te(),this.h()},l(i){t=O(i,"H1",{class:!0});var l=X(t);n=$(l,r),l.forEach(k),o=E(i);for(let u=0;u<a.length;u+=1)a[u].l(i);c=te(),this.h()},h(){w(t,"class","svelte-9xbp36")},m(i,l){x(i,t,l),m(t,n),x(i,o,l);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,l);x(i,c,l)},p(i,l){if(l&1){s=ne(i[14]);let u;for(u=0;u<s.length;u+=1){const T=be(i,s,u);a[u]?a[u].p(T,l):(a[u]=ve(T),a[u].c(),a[u].m(c.parentNode,c))}for(;u<a.length;u+=1)a[u].d(1);a.length=s.length}},d(i){i&&(k(t),k(o),k(c)),Ie(a,i)}}}function ke(e){let t,r=ne([...e[0]]),n=[];for(let o=0;o<r.length;o+=1)n[o]=we(ye(e,r,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=te()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);t=te()},m(o,c){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(o,c);x(o,t,c)},p(o,c){if(c&1){r=ne([...o[0]]);let s;for(s=0;s<r.length;s+=1){const a=ye(o,r,s);n[s]?n[s].p(a,c):(n[s]=we(a),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(o){o&&k(t),Ie(n,o)}}}function gt(e){let t,r,n,o='This site is built with Svelte as a playground project, which sends request to a DoH server. <a href="https://github.com/richardevs/dns-spa" target="_blank">Source</a>',c,s,a="It queries the common record types for the domain. Format: TTL, value",i,l,u,T,b,R="Summarize",P,d,h="Copy Link",p,f,C,J=e[2],G,re,me;f=new Qe({}),f.$on("Enter",e[6]);let M=ke(e);return{c(){t=I("div"),r=I("div"),n=I("p"),n.innerHTML=o,c=B(),s=I("p"),s.textContent=a,i=B(),l=I("h1"),u=I("input"),T=B(),b=I("button"),b.textContent=R,P=B(),d=I("button"),d.textContent=h,p=B(),qe(f.$$.fragment),C=B(),M.c(),this.h()},l(y){t=O(y,"DIV",{class:!0});var A=X(t);r=O(A,"DIV",{class:!0});var S=X(r);n=O(S,"P",{"data-svelte-h":!0}),Q(n)!=="svelte-2mkrq9"&&(n.innerHTML=o),c=E(S),s=O(S,"P",{"data-svelte-h":!0}),Q(s)!=="svelte-e6nsjt"&&(s.textContent=a),i=E(S),l=O(S,"H1",{class:!0});var L=X(l);u=O(L,"INPUT",{placeholder:!0,class:!0}),T=E(L),b=O(L,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),Q(b)!=="svelte-w2llk"&&(b.textContent=R),P=E(L),d=O(L,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),Q(d)!=="svelte-7h23uh"&&(d.textContent=h),L.forEach(k),p=E(S),xe(f.$$.fragment,S),C=E(S),M.l(S),S.forEach(k),A.forEach(k),this.h()},h(){w(u,"placeholder","enter desired domain"),w(u,"class","svelte-9xbp36"),w(b,"id","sum"),w(b,"class","svelte-9xbp36"),w(d,"id","sum"),w(d,"class","svelte-9xbp36"),w(l,"class","svelte-9xbp36"),w(r,"class","card svelte-9xbp36"),w(t,"class","container svelte-9xbp36")},m(y,A){x(y,t,A),m(t,r),m(r,n),m(r,c),m(r,s),m(r,i),m(r,l),m(l,u),ge(u,e[1]),m(l,T),m(l,b),m(l,P),m(l,d),m(r,p),Fe(f,r,null),m(r,C),M.m(r,null),G=!0,re||(me=[D(u,"input",e[5]),D(b,"click",e[3]),D(d,"click",yt)],re=!0)},p(y,[A]){A&2&&u.value!==y[1]&&ge(u,y[1]),A&4&&le(J,J=y[2])?(M.d(1),M=ke(y),M.c(),M.m(r,null)):M.p(y,A)},i(y){G||(Ke(f.$$.fragment,y),G=!0)},o(y){Xe(f.$$.fragment,y),G=!1},d(y){y&&k(t),He(f),M.d(y),re=!1,Se(me)}}}let Te="https://dns.google/resolve?";async function yt(){const t=new URL(window.location.href).searchParams.get("query"),r=t?`${window.location.origin}${window.location.pathname}?query=${t}`:`${window.location.origin}${window.location.pathname}`;await navigator.clipboard.writeText(r)}function bt(e,t,r){let n;Re(e,ze,h=>r(4,n=h));let o="",c=0;const s=new Map;function a(h){const p=ae.compress(h);return btoa(JSON.stringify(p)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function i(h){try{const p=h.replace(/-/g,"+").replace(/_/g,"/").padEnd(h.length+(4-h.length%4)%4,"="),f=atob(p),C=JSON.parse(f);return ae.decompress(C)}catch(p){return console.error("Failed to decode results:",p),{}}}function l(){{const h=n.url.searchParams.get("query"),p=n.url.searchParams.get("results");if(h&&(r(1,o=h),p))try{const f=i(p);s.clear();for(const[C,J]of Object.entries(f))s.set(C,J);r(2,c++,c)}catch(f){console.error("Failed to parse results:",f)}}}let u;Le(()=>{l(),u=async h=>{const p=new URL(window.location.href);p.searchParams.set("query",o),h&&p.searchParams.set("results",a(h)),await Ye(p.toString(),{replaceState:!1})}});let T=["SOA","A","AAAA","TXT","MX","NS","CAA"];const b={_dmarc:"TXT",_spf:"TXT","mta-sts":"A","_mta-sts":"TXT","_smtp._tls":"TXT","google._domainkey":"TXT"};async function R(){s.clear();const h={};for(const p of T)await fetch(Te+"name="+o+"&type="+p,{headers:{accept:"application/dns-json"}}).then(f=>f.json()).then(f=>{f.Answer&&(s.set(p,f.Answer),h[p]=f.Answer,console.log("setting",p))}).catch(f=>(console.log(f),[]));for(let p in b)await fetch(Te+"name="+p+"."+o+"&type="+b[p],{headers:{accept:"application/dns-json"}}).then(f=>f.json()).then(f=>{f.Answer&&(s.set(p,f.Answer),h[p]=f.Answer,console.log("setting",p))}).catch(f=>(console.log(f),[]));r(2,c++,c),await u(h)}function P(){o=this.value,r(1,o)}const d=()=>{var h;(h=document.getElementById("sum"))==null||h.click()};return e.$$.update=()=>{e.$$.dirty&16&&(n.url.search,l())},[s,o,c,R,n,P,d]}class St extends Oe{constructor(t){super(),Me(this,t,bt,gt,le,{apiMap:0})}get apiMap(){return this.$$.ctx[0]}}export{St as component};
