import{S as Me,i as Ne,s as fe,n as H,J as je,K as R,L as qe,M as ge,d as T,C as Fe,o as Ke,p as Xe,N as be,b as E,c as g,E as He,G as I,h as V,e as O,f as Y,O as J,F as xe,k as B,j as M,D as ze,l as Je,z as Ye,P as Ue,x as re,g as ee,t as te}from"../chunks/DnImsSDJ.js";import"../chunks/IHki7fMi.js";import{g as Ge}from"../chunks/Cz6mZWNA.js";import{p as Qe}from"../chunks/Ci-B3eT7.js";function oe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function We(e){let t,r;return{c:H,l:H,m(n,o){t||(r=[R(document.body,"keyup",e[8]),R(document.body,"keyup",e[10]),R(document.body,"keydown",e[9]),R(document.body,"keydown",e[11])],t=!0)},p:H,i:H,o:H,d(n){t=!1,je(r)}}}function Ze(e,t,r){let n,o,{paused:c=!1}=t,{pauseOnInput:s=!1}=t,{separator:i="-"}=t;const u=qe();let d=[],a=[];function m(f){ge.call(this,e,f)}function D(f){ge.call(this,e,f)}const k=({key:f})=>{r(4,a=a.filter(y=>y!==f)),!(a.length>0)&&r(2,d=[])},q=({key:f,target:y})=>{s&&y.tagName!=="BODY"||(r(4,a=[...a,f]),c||(f in o?u("combo",n):r(2,d=[...d,f]),u(f===" "?"Space":f),u("key",f)))};return e.$$set=f=>{"paused"in f&&r(0,c=f.paused),"pauseOnInput"in f&&r(1,s=f.pauseOnInput),"separator"in f&&r(7,i=f.separator)},e.$$.update=()=>{e.$$.dirty&132&&r(3,n=d.join(i)),e.$$.dirty&4&&r(5,o=d.reduce((f,y)=>({...f,[y]:!0}),{})),e.$$.dirty&12&&d.length>0&&u("combo",n)},[c,s,d,n,a,o,u,i,m,D,k,q]}class $e extends Me{constructor(t){super(),Ne(this,t,Ze,We,fe,{paused:0,pauseOnInput:1,separator:7})}}var le={},C={},A={};Object.defineProperty(A,"__esModule",{value:!0});A.throwUnsupportedData=A.throwUnknownDataType=A.getType=void 0;function Ce(e){return Object.prototype.toString.call(e)}A.getType=Ce;function et(e){throw new TypeError("unsupported data type: "+Ce(e))}A.throwUnknownDataType=et;function tt(e){throw new TypeError("unsupported data type: "+e)}A.throwUnsupportedData=tt;var b={},v={};Object.defineProperty(v,"__esModule",{value:!0});v.s_to_num=v.int_str_to_s=v.num_to_s=v.big_int_to_s=v.int_to_s=v.s_to_big_int=v.s_to_int=void 0;let P="";for(let e=0;e<10;e++){const t=String.fromCharCode(48+e);P+=t}for(let e=0;e<26;e++){const t=String.fromCharCode(65+e);P+=t}for(let e=0;e<26;e++){const t=String.fromCharCode(97+e);P+=t}const x=P.length,he={};for(let e=0;e<x;e++){const t=P[e];he[t]=e}function pe(e){let t=0,r=1;for(let n=e.length-1;n>=0;n--){const o=e[n];let c=he[o];c*=r,t+=c,r*=x}return t}v.s_to_int=pe;function Ae(e){let t=BigInt(0),r=BigInt(1);const n=BigInt(x);for(let o=e.length-1;o>=0;o--){const c=e[o];let s=BigInt(he[c]);s*=r,t+=s,r*=n}return t}v.s_to_big_int=Ae;function _e(e){if(e===0)return P[0];const t=[];for(;e!==0;){const r=e%x,n=P[r];t.push(n),e-=r,e/=x}return t.reverse().join("")}v.int_to_s=_e;function Pe(e){const t=BigInt(0),r=BigInt(x);if(e===t)return P[0];const n=[];for(;e!==t;){const o=e%r,c=P[Number(o)];n.push(c),e/=r}return n.reverse().join("")}v.big_int_to_s=Pe;function Ve(e){return e.split("").reverse().join("")}function Be(e){if(e<0)return"-"+Be(-e);let[t,r]=e.toString().split(".");if(!r)if(t.includes("e")){const[c,s]=t.split("e");t=c,r="0e"+s}else return _e(e);let n;r&&([r,n]=r.split("e")),t=ne(t),r=Ve(r),r=ne(r);let o=t+"."+r;if(n){switch(o+=".",n[0]){case"+":n=n.slice(1);break;case"-":o+="-",n=n.slice(1);break}n=ne(n),o+=n}return o}v.num_to_s=Be;function ne(e){const t=+e;return t.toString()===e&&t+1!==t&&t-1!==t?_e(t):":"+Pe(BigInt(e))}v.int_str_to_s=ne;function se(e){return e[0]===":"?Ae(e.substring(1)).toString():pe(e).toString()}function Ee(e){if(e[0]==="-")return-Ee(e.substr(1));let[t,r,n]=e.split(".");if(!r)return pe(t);t=se(t),r=se(r),r=Ve(r);let o=t+"."+r;if(n){o+="e";let c=!1;n[0]==="-"&&(c=!0,n=n.slice(1)),n=se(n),o+=c?-n:+n}return+o}v.s_to_num=Ee;Object.defineProperty(b,"__esModule",{value:!0});b.decodeStr=b.encodeStr=b.decodeBool=b.encodeBool=b.decodeKey=b.decodeNum=b.encodeNum=void 0;const me=v;function nt(e){return"n|"+(0,me.num_to_s)(e)}b.encodeNum=nt;function rt(e){return e=e.replace("n|",""),(0,me.s_to_num)(e)}b.decodeNum=rt;function ot(e){return typeof e=="number"?e:(0,me.s_to_int)(e)}b.decodeKey=ot;function ct(e){return e?"b|T":"b|F"}b.encodeBool=ct;function st(e){switch(e){case"b|T":return!0;case"b|F":return!1}return!!e}b.decodeBool=st;function it(e){switch(e[0]+e[1]){case"b|":case"o|":case"n|":case"a|":case"s|":e="s|"+e}return e}b.encodeStr=it;function ut(e){return e[0]+e[1]==="s|"?e.substr(2):e}b.decodeStr=ut;var S={},W={};Object.defineProperty(W,"__esModule",{value:!0});W.config=void 0;W.config={sort_key:!1,error_on_nan:!1,error_on_infinite:!1};Object.defineProperty(S,"__esModule",{value:!0});S.addValue=S.makeInMemoryMemory=S.makeInMemoryCache=S.makeInMemoryStore=S.memToValues=void 0;const de=W,ie=A,ue=b,at=v;function lt(e){return e.store.toArray()}S.memToValues=lt;function De(){const e=[];return{forEach(t){for(let r=0;r<e.length;r++)if(t(e[r])==="break")return},add(t){e.push(t)},toArray(){return e}}}S.makeInMemoryStore=De;function Le(){const e=Object.create(null),t=Object.create(null);return{getValue(r){return e[r]},getSchema(r){return t[r]},forEachValue(r){for(const[n,o]of Object.entries(e))if(r(n,o)==="break")return},forEachSchema(r){for(const[n,o]of Object.entries(t))if(r(n,o)==="break")return},setValue(r,n){e[r]=n},setSchema(r,n){t[r]=n},hasValue(r){return r in e},hasSchema(r){return r in t}}}S.makeInMemoryCache=Le;function dt(){return{store:De(),cache:Le(),keyCount:0}}S.makeInMemoryMemory=dt;function L(e,t){if(e.cache.hasValue(t))return e.cache.getValue(t);const r=e.keyCount++,n=(0,at.num_to_s)(r);return e.store.add(t),e.cache.setValue(t,n),n}function ft(e,t){de.config.sort_key&&t.sort();const r=t.join(",");if(e.cache.hasSchema(r))return e.cache.getSchema(r);const n=G(e,t,void 0);return e.cache.setSchema(r,n),n}function G(e,t,r){if(t===null)return"";switch(typeof t){case"undefined":if(Array.isArray(r))return G(e,null,r);break;case"object":if(t===null)return L(e,null);if(Array.isArray(t)){let n="a";for(let o=0;o<t.length;o++){const c=t[o],s=c===null?"_":G(e,c,t);n+="|"+s}return n==="a"&&(n="a|"),L(e,n)}else{const n=Object.keys(t);if(n.length===0)return L(e,"o|");let o="o";const c=ft(e,n);o+="|"+c;for(const s of n){const i=t[s],u=G(e,i,t);o+="|"+u}return L(e,o)}case"boolean":return L(e,(0,ue.encodeBool)(t));case"number":return Number.isNaN(t)?(de.config.error_on_nan&&(0,ie.throwUnsupportedData)("[number NaN]"),""):Number.POSITIVE_INFINITY===t||Number.NEGATIVE_INFINITY===t?(de.config.error_on_infinite&&(0,ie.throwUnsupportedData)("[number Infinity]"),""):L(e,(0,ue.encodeNum)(t));case"string":return L(e,(0,ue.encodeStr)(t))}return(0,ie.throwUnknownDataType)(t)}S.addValue=G;Object.defineProperty(C,"__esModule",{value:!0});C.decompress=C.decode=C.compress=void 0;const ht=A,$=b,ae=S;function pt(e){const t=(0,ae.makeInMemoryMemory)(),r=(0,ae.addValue)(t,e,void 0);return[(0,ae.memToValues)(t),r]}C.compress=pt;function _t(e,t){if(t==="o|")return{};const r={},n=t.split("|"),o=n[1];let c=Q(e,o);const s=n.length;s-2===1&&!Array.isArray(c)&&(c=[c]);for(let i=2;i<s;i++){const u=c[i-2];let d=n[i];d=Q(e,d),r[u]=d}return r}function mt(e,t){if(t==="a|")return[];const r=t.split("|"),n=r.length-1,o=new Array(n);for(let c=0;c<n;c++){let s=r[c+1];s=Q(e,s),o[c]=s}return o}function Q(e,t){if(t===""||t==="_")return null;const r=(0,$.decodeKey)(t),n=e[r];if(n===null)return n;switch(typeof n){case"undefined":return n;case"number":return n;case"string":switch(n[0]+n[1]){case"b|":return(0,$.decodeBool)(n);case"o|":return _t(e,n);case"n|":return(0,$.decodeNum)(n);case"a|":return mt(e,n);default:return(0,$.decodeStr)(n)}}return(0,ht.throwUnknownDataType)(n)}C.decode=Q;function yt(e){const[t,r]=e;return Q(t,r)}C.decompress=yt;var z={};Object.defineProperty(z,"__esModule",{value:!0});z.trimUndefinedRecursively=z.trimUndefined=void 0;function gt(e){for(const t in e)e[t]===void 0&&delete e[t]}z.trimUndefined=gt;function bt(e){Re(e,new Set)}z.trimUndefinedRecursively=bt;function Re(e,t){t.add(e);for(const r in e)if(e[r]===void 0)delete e[r];else{const n=e[r];n&&typeof n=="object"&&!t.has(n)&&Re(n,t)}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.config=e.trimUndefinedRecursively=e.trimUndefined=e.addValue=e.decode=e.decompress=e.compress=void 0;var t=C;Object.defineProperty(e,"compress",{enumerable:!0,get:function(){return t.compress}}),Object.defineProperty(e,"decompress",{enumerable:!0,get:function(){return t.decompress}});var r=C;Object.defineProperty(e,"decode",{enumerable:!0,get:function(){return r.decode}});var n=S;Object.defineProperty(e,"addValue",{enumerable:!0,get:function(){return n.addValue}});var o=z;Object.defineProperty(e,"trimUndefined",{enumerable:!0,get:function(){return o.trimUndefined}}),Object.defineProperty(e,"trimUndefinedRecursively",{enumerable:!0,get:function(){return o.trimUndefinedRecursively}});var c=W;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return c.config}})})(le);function ve(e,t,r){const n=e.slice();return n[15]=t[r][0],n[16]=t[r][1],n}function we(e,t,r){const n=e.slice();return n[19]=t[r],n}function ke(e){let t,r="Link copied!";return{c(){t=M("div"),t.textContent=r,this.h()},l(n){t=O(n,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1hgmeax"&&(t.textContent=r),this.h()},h(){I(t,"class","toast svelte-1rvcf6u")},m(n,o){E(n,t,o)},d(n){n&&T(t)}}}function Te(e){let t,r=e[19].TTL+"",n,o,c=e[19].data+"",s;return{c(){t=M("li"),n=te(r),o=te(", "),s=te(c),this.h()},l(i){t=O(i,"LI",{class:!0});var u=Y(t);n=ee(u,r),o=ee(u,", "),s=ee(u,c),u.forEach(T),this.h()},h(){I(t,"class","svelte-1rvcf6u")},m(i,u){E(i,t,u),g(t,n),g(t,o),g(t,s)},p:H,d(i){i&&T(t)}}}function Se(e){let t,r=e[15]+"",n,o,c,s=oe(e[16]),i=[];for(let u=0;u<s.length;u+=1)i[u]=Te(we(e,s,u));return{c(){t=M("h1"),n=te(r),o=B();for(let u=0;u<i.length;u+=1)i[u].c();c=re(),this.h()},l(u){t=O(u,"H1",{class:!0});var d=Y(t);n=ee(d,r),d.forEach(T),o=V(u);for(let a=0;a<i.length;a+=1)i[a].l(u);c=re(),this.h()},h(){I(t,"class","svelte-1rvcf6u")},m(u,d){E(u,t,d),g(t,n),E(u,o,d);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(u,d);E(u,c,d)},p(u,d){if(d&1){s=oe(u[16]);let a;for(a=0;a<s.length;a+=1){const m=we(u,s,a);i[a]?i[a].p(m,d):(i[a]=Te(m),i[a].c(),i[a].m(c.parentNode,c))}for(;a<i.length;a+=1)i[a].d(1);i.length=s.length}},d(u){u&&(T(t),T(o),T(c)),Ue(i,u)}}}function Ie(e){let t,r=oe([...e[0]]),n=[];for(let o=0;o<r.length;o+=1)n[o]=Se(ve(e,r,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=re()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);t=re()},m(o,c){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(o,c);E(o,t,c)},p(o,c){if(c&1){r=oe([...o[0]]);let s;for(s=0;s<r.length;s+=1){const i=ve(o,r,s);n[s]?n[s].p(i,c):(n[s]=Se(i),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(o){o&&T(t),Ue(n,o)}}}function vt(e){let t,r,n,o,c='This site is built with Svelte as a playground project, which sends request to a DoH server. <a href="https://github.com/richardevs/dns-spa" target="_blank">Source</a>',s,i,u="It queries the common record types for the domain. Format: TTL, value",d,a,m,D,k,q="Summarize",f,y,Z="Copy Link",h,l,p,F=e[2],K,ce,ye,w=e[3]&&ke();l=new $e({}),l.$on("Enter",e[8]);let U=Ie(e);return{c(){w&&w.c(),t=B(),r=M("div"),n=M("div"),o=M("p"),o.innerHTML=c,s=B(),i=M("p"),i.textContent=u,d=B(),a=M("h1"),m=M("input"),D=B(),k=M("button"),k.textContent=q,f=B(),y=M("button"),y.textContent=Z,h=B(),ze(l.$$.fragment),p=B(),U.c(),this.h()},l(_){w&&w.l(_),t=V(_),r=O(_,"DIV",{class:!0});var N=Y(r);n=O(N,"DIV",{class:!0});var j=Y(n);o=O(j,"P",{"data-svelte-h":!0}),J(o)!=="svelte-2mkrq9"&&(o.innerHTML=c),s=V(j),i=O(j,"P",{"data-svelte-h":!0}),J(i)!=="svelte-e6nsjt"&&(i.textContent=u),d=V(j),a=O(j,"H1",{class:!0});var X=Y(a);m=O(X,"INPUT",{placeholder:!0,class:!0}),D=V(X),k=O(X,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),J(k)!=="svelte-w2llk"&&(k.textContent=q),f=V(X),y=O(X,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),J(y)!=="svelte-4w9p55"&&(y.textContent=Z),X.forEach(T),h=V(j),xe(l.$$.fragment,j),p=V(j),U.l(j),j.forEach(T),N.forEach(T),this.h()},h(){I(m,"placeholder","enter desired domain"),I(m,"class","svelte-1rvcf6u"),I(k,"id","sum"),I(k,"class","svelte-1rvcf6u"),I(y,"id","copylink"),I(y,"class","svelte-1rvcf6u"),I(a,"class","svelte-1rvcf6u"),I(n,"class","card svelte-1rvcf6u"),I(r,"class","container svelte-1rvcf6u")},m(_,N){w&&w.m(_,N),E(_,t,N),E(_,r,N),g(r,n),g(n,o),g(n,s),g(n,i),g(n,d),g(n,a),g(a,m),be(m,e[1]),g(a,D),g(a,k),g(a,f),g(a,y),g(n,h),He(l,n,null),g(n,p),U.m(n,null),K=!0,ce||(ye=[R(m,"input",e[7]),R(k,"click",e[4]),R(y,"click",e[5])],ce=!0)},p(_,[N]){_[3]?w||(w=ke(),w.c(),w.m(t.parentNode,t)):w&&(w.d(1),w=null),N&2&&m.value!==_[1]&&be(m,_[1]),N&4&&fe(F,F=_[2])?(U.d(1),U=Ie(_),U.c(),U.m(n,null)):U.p(_,N)},i(_){K||(Xe(l.$$.fragment,_),K=!0)},o(_){Ke(l.$$.fragment,_),K=!1},d(_){_&&(T(t),T(r)),w&&w.d(_),Fe(l),U.d(_),ce=!1,je(ye)}}}let Oe="https://dns.google/resolve?";function wt(e,t,r){let n;Je(e,Qe,h=>r(6,n=h));let o="",c=0;const s=new Map;let i=!1;function u(h){const l=le.compress(h);return btoa(JSON.stringify(l)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function d(h){try{const l=h.replace(/-/g,"+").replace(/_/g,"/").padEnd(h.length+(4-h.length%4)%4,"="),p=atob(l),F=JSON.parse(p);return le.decompress(F)}catch(l){return console.error("Failed to decode results:",l),{}}}function a(){{const h=n.url.searchParams.get("query"),l=n.url.searchParams.get("results");if(h&&(r(1,o=h),l))try{const p=d(l);s.clear();for(const[F,K]of Object.entries(p))s.set(F,K);r(2,c++,c)}catch(p){console.error("Failed to parse results:",p)}}}let m;Ye(()=>{a(),m=async h=>{const l=new URL(window.location.href);l.searchParams.set("query",o),h&&l.searchParams.set("results",u(h)),await Ge(l.toString(),{replaceState:!1})}});let D=["SOA","A","AAAA","TXT","MX","NS","CAA"];const k={_dmarc:"TXT",_spf:"TXT","mta-sts":"A","_mta-sts":"TXT","_smtp._tls":"TXT","google._domainkey":"TXT"};async function q(){s.clear();const h={};for(const l of D)await fetch(Oe+"name="+o+"&type="+l,{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(s.set(l,p.Answer),h[l]=p.Answer,console.log("setting",l))}).catch(p=>(console.log(p),[]));for(let l in k)await fetch(Oe+"name="+l+"."+o+"&type="+k[l],{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(s.set(l,p.Answer),h[l]=p.Answer,console.log("setting",l))}).catch(p=>(console.log(p),[]));r(2,c++,c),await m(h)}async function f(){try{const l=new URL(window.location.href).searchParams.get("query"),p=l?`${window.location.origin}${window.location.pathname}?query=${l}`:`${window.location.origin}${window.location.pathname}`;await navigator.clipboard.writeText(p),r(3,i=!0),setTimeout(()=>r(3,i=!1),2e3)}catch(h){console.error("Failed to copy:",h)}}function y(){o=this.value,r(1,o)}const Z=()=>{var h;(h=document.getElementById("sum"))==null||h.click()};return e.$$.update=()=>{e.$$.dirty&64&&(n.url.search,a())},[s,o,c,i,q,f,n,y,Z]}class Ot extends Me{constructor(t){super(),Ne(this,t,wt,vt,fe,{apiMap:0})}get apiMap(){return this.$$.ctx[0]}}export{Ot as component};
