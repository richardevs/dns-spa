import{s as B,n as C,A as q,B as W,C as te,D as K,e as T,a as I,c as k,b as M,E as P,g as S,f as g,v as A,i as x,h as m,F as R,k as ne,r as se,p as X,G as Z,t as L,d as O}from"../chunks/scheduler.qgu3jX-3.js";import{S as $,i as ee,b as le,d as oe,m as ae,t as ce,a as re,e as ie}from"../chunks/index.1MBy2nZE.js";import{p as ue}from"../chunks/stores.Grri5SJ1.js";function H(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function he(o){let t,e;return{c:C,l:C,m(n,s){t||(e=[q(document.body,"keyup",o[8]),q(document.body,"keyup",o[10]),q(document.body,"keydown",o[9]),q(document.body,"keydown",o[11])],t=!0)},p:C,i:C,o:C,d(n){t=!1,W(e)}}}function de(o,t,e){let n,s,{paused:i=!1}=t,{pauseOnInput:l=!1}=t,{separator:r="-"}=t;const a=te();let h=[],c=[];function v(u){K.call(this,o,u)}function _(u){K.call(this,o,u)}const d=({key:u})=>{e(4,c=c.filter(b=>b!==u)),!(c.length>0)&&e(2,h=[])},p=({key:u,target:b})=>{l&&b.tagName!=="BODY"||(e(4,c=[...c,u]),i||(u in s?a("combo",n):e(2,h=[...h,u]),a(u===" "?"Space":u),a("key",u)))};return o.$$set=u=>{"paused"in u&&e(0,i=u.paused),"pauseOnInput"in u&&e(1,l=u.pauseOnInput),"separator"in u&&e(7,r=u.separator)},o.$$.update=()=>{o.$$.dirty&132&&e(3,n=h.join(r)),o.$$.dirty&4&&e(5,s=h.reduce((u,b)=>({...u,[b]:!0}),{})),o.$$.dirty&12&&h.length>0&&a("combo",n)},[i,l,h,n,c,s,a,r,v,_,d,p]}class pe extends ${constructor(t){super(),ee(this,t,de,he,B,{paused:0,pauseOnInput:1,separator:7})}}function V(o,t,e){const n=o.slice();return n[10]=t[e][0],n[11]=t[e][1],n}function z(o,t,e){const n=o.slice();return n[14]=t[e],n}function G(o){let t,e=o[14].TTL+"",n,s,i=o[14].data+"",l;return{c(){t=T("li"),n=L(e),s=L(", "),l=L(i),this.h()},l(r){t=k(r,"LI",{class:!0});var a=M(t);n=O(a,e),s=O(a,", "),l=O(a,i),a.forEach(g),this.h()},h(){A(t,"class","svelte-1xlt0e4")},m(r,a){x(r,t,a),m(t,n),m(t,s),m(t,l)},p:C,d(r){r&&g(t)}}}function Y(o){let t,e=o[10]+"",n,s,i,l=H(o[11]),r=[];for(let a=0;a<l.length;a+=1)r[a]=G(z(o,l,a));return{c(){t=T("h1"),n=L(e),s=I();for(let a=0;a<r.length;a+=1)r[a].c();i=X(),this.h()},l(a){t=k(a,"H1",{class:!0});var h=M(t);n=O(h,e),h.forEach(g),s=S(a);for(let c=0;c<r.length;c+=1)r[c].l(a);i=X(),this.h()},h(){A(t,"class","svelte-1xlt0e4")},m(a,h){x(a,t,h),m(t,n),x(a,s,h);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,h);x(a,i,h)},p(a,h){if(h&1){l=H(a[11]);let c;for(c=0;c<l.length;c+=1){const v=z(a,l,c);r[c]?r[c].p(v,h):(r[c]=G(v),r[c].c(),r[c].m(i.parentNode,i))}for(;c<r.length;c+=1)r[c].d(1);r.length=l.length}},d(a){a&&(g(t),g(s),g(i)),Z(r,a)}}}function J(o){let t,e=H([...o[0]]),n=[];for(let s=0;s<e.length;s+=1)n[s]=Y(V(o,e,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=X()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);t=X()},m(s,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,i);x(s,t,i)},p(s,i){if(i&1){e=H([...s[0]]);let l;for(l=0;l<e.length;l+=1){const r=V(s,e,l);n[l]?n[l].p(r,i):(n[l]=Y(r),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=e.length}},d(s){s&&g(t),Z(n,s)}}}function fe(o){let t,e,n,s='This site is built with Svelte as a playground project, which sends request to a DoH server. <a href="https://github.com/richardevs/dns-spa" target="_blank">Source</a>',i,l,r="It queries the common record types for the domain. Format: TTL, value",a,h,c,v,_,d="Summarize",p,u,b,U=o[2],j,N,F;u=new pe({}),u.$on("Enter",o[5]);let w=J(o);return{c(){t=T("div"),e=T("div"),n=T("p"),n.innerHTML=s,i=I(),l=T("p"),l.textContent=r,a=I(),h=T("h1"),c=T("input"),v=I(),_=T("button"),_.textContent=d,p=I(),le(u.$$.fragment),b=I(),w.c(),this.h()},l(f){t=k(f,"DIV",{class:!0});var E=M(t);e=k(E,"DIV",{class:!0});var y=M(e);n=k(y,"P",{"data-svelte-h":!0}),P(n)!=="svelte-2mkrq9"&&(n.innerHTML=s),i=S(y),l=k(y,"P",{"data-svelte-h":!0}),P(l)!=="svelte-e6nsjt"&&(l.textContent=r),a=S(y),h=k(y,"H1",{class:!0});var D=M(h);c=k(D,"INPUT",{placeholder:!0,class:!0}),v=S(D),_=k(D,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),P(_)!=="svelte-w2llk"&&(_.textContent=d),D.forEach(g),p=S(y),oe(u.$$.fragment,y),b=S(y),w.l(y),y.forEach(g),E.forEach(g),this.h()},h(){A(c,"placeholder","enter desired domain"),A(c,"class","svelte-1xlt0e4"),A(_,"id","sum"),A(_,"class","svelte-1xlt0e4"),A(h,"class","svelte-1xlt0e4"),A(e,"class","card svelte-1xlt0e4"),A(t,"class","container svelte-1xlt0e4")},m(f,E){x(f,t,E),m(t,e),m(e,n),m(e,i),m(e,l),m(e,a),m(e,h),m(h,c),R(c,o[1]),m(h,v),m(h,_),m(e,p),ae(u,e,null),m(e,b),w.m(e,null),j=!0,N||(F=[q(c,"input",o[4]),q(_,"click",o[3])],N=!0)},p(f,[E]){E&2&&c.value!==f[1]&&R(c,f[1]),E&4&&B(U,U=f[2])?(w.d(1),w=J(f),w.c(),w.m(e,null)):w.p(f,E)},i(f){j||(ce(u.$$.fragment,f),j=!0)},o(f){re(u.$$.fragment,f),j=!1},d(f){f&&g(t),ie(u),w.d(f),N=!1,W(F)}}}let Q="https://dns.google/resolve?";function me(o,t,e){let n;ne(o,ue,d=>e(6,n=d));let s="",i=0;const l=new Map;se(()=>{const d=n.url.searchParams.get("query");d&&e(1,s=d)});let r=["SOA","A","AAAA","TXT","MX","NS","CAA"];const a={_dmarc:"TXT",_spf:"TXT","mta-sts":"A","_mta-sts":"TXT","_smtp._tls":"TXT","google._domainkey":"TXT"};async function h(){c(),l.clear();for(const d of r)await fetch(Q+"name="+s+"&type="+d,{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(l.set(d,p.Answer),console.log("setting",d))}).catch(p=>(console.log(p),[]));for(let d in a)await fetch(Q+"name="+d+"."+s+"&type="+a[d],{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(l.set(d,p.Answer),console.log("setting",d))}).catch(p=>(console.log(p),[]));e(2,i++,i),console.log("returning.")}function c(){const d=new URL(window.location);d.searchParams.set("query",s),window.history.pushState({},"",d)}function v(){s=this.value,e(1,s)}return[l,s,i,h,v,()=>{var d;(d=document.getElementById("sum"))==null||d.click()}]}class ye extends ${constructor(t){super(),ee(this,t,me,fe,B,{apiMap:0})}get apiMap(){return this.$$.ctx[0]}}export{ye as component};
