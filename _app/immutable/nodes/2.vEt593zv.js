import{s as L,n as C,p as S,r as Q,q as Z,v as D,e as T,b as E,w as j,d as k,x as X,j as I,f as x,i as _,y as P,k as g,l as v,z,A as R,t as M,h as N}from"../chunks/scheduler.-gP7ZxVZ.js";import{S as V,i as W,c as $,b as ee,m as te,t as ne,a as le,d as se}from"../chunks/index.DcxVHqMU.js";function O(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function oe(s){let t,i;return{c:C,l:C,m(e,l){t||(i=[S(document.body,"keyup",s[8]),S(document.body,"keyup",s[10]),S(document.body,"keydown",s[9]),S(document.body,"keydown",s[11])],t=!0)},p:C,i:C,o:C,d(e){t=!1,Q(i)}}}function ae(s,t,i){let e,l,{paused:r=!1}=t,{pauseOnInput:a=!1}=t,{separator:o="-"}=t;const n=Z();let f=[],c=[];function d(h){D.call(this,s,h)}function p(h){D.call(this,s,h)}const y=({key:h})=>{i(4,c=c.filter(b=>b!==h)),!(c.length>0)&&i(2,f=[])},A=({key:h,target:b})=>{a&&b.tagName!=="BODY"||(i(4,c=[...c,h]),r||(h in l?n("combo",e):i(2,f=[...f,h]),n(h===" "?"Space":h),n("key",h)))};return s.$$set=h=>{"paused"in h&&i(0,r=h.paused),"pauseOnInput"in h&&i(1,a=h.pauseOnInput),"separator"in h&&i(7,o=h.separator)},s.$$.update=()=>{s.$$.dirty&132&&i(3,e=f.join(o)),s.$$.dirty&4&&i(5,l=f.reduce((h,b)=>({...h,[b]:!0}),{})),s.$$.dirty&12&&f.length>0&&n("combo",e)},[r,a,f,e,c,l,n,o,d,p,y,A]}class ce extends V{constructor(t){super(),W(this,t,ae,oe,L,{paused:0,pauseOnInput:1,separator:7})}}function K(s,t,i){const e=s.slice();return e[8]=t[i][0],e[9]=t[i][1],e}function U(s,t,i){const e=s.slice();return e[12]=t[i],e}function F(s){let t,i=s[12].TTL+"",e,l,r=s[12].data+"",a;return{c(){t=T("li"),e=M(i),l=M(", "),a=M(r)},l(o){t=k(o,"LI",{});var n=x(t);e=N(n,i),l=N(n,", "),a=N(n,r),n.forEach(_)},m(o,n){g(o,t,n),v(t,e),v(t,l),v(t,a)},p:C,d(o){o&&_(t)}}}function Y(s){let t,i=s[8]+"",e,l,r,a=O(s[9]),o=[];for(let n=0;n<a.length;n+=1)o[n]=F(U(s,a,n));return{c(){t=T("h1"),e=M(i),l=E();for(let n=0;n<o.length;n+=1)o[n].c();r=j()},l(n){t=k(n,"H1",{});var f=x(t);e=N(f,i),f.forEach(_),l=I(n);for(let c=0;c<o.length;c+=1)o[c].l(n);r=j()},m(n,f){g(n,t,f),v(t,e),g(n,l,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,f);g(n,r,f)},p(n,f){if(f&1){a=O(n[9]);let c;for(c=0;c<a.length;c+=1){const d=U(n,a,c);o[c]?o[c].p(d,f):(o[c]=F(d),o[c].c(),o[c].m(r.parentNode,r))}for(;c<o.length;c+=1)o[c].d(1);o.length=a.length}},d(n){n&&(_(t),_(l),_(r)),R(o,n)}}}function G(s){let t,i=O([...s[0]]),e=[];for(let l=0;l<i.length;l+=1)e[l]=Y(K(s,i,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=j()},l(l){for(let r=0;r<e.length;r+=1)e[r].l(l);t=j()},m(l,r){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,r);g(l,t,r)},p(l,r){if(r&1){i=O([...l[0]]);let a;for(a=0;a<i.length;a+=1){const o=K(l,i,a);e[a]?e[a].p(o,r):(e[a]=Y(o),e[a].c(),e[a].m(t.parentNode,t))}for(;a<e.length;a+=1)e[a].d(1);e.length=i.length}},d(l){l&&_(t),R(e,l)}}}function ie(s){let t,i='This site is built with Svelte as a playground project, which sends request to a DoH server. <a href="https://github.com/richardevs/dns-spa" target="_blank">Source</a>',e,l,r="It quries the common record types for the domain. Format: TTL, value",a,o,n,f,c,d="Summarize",p,y,A,h=s[2],b,q,H,B;y=new ce({}),y.$on("Enter",s[5]);let w=G(s);return{c(){t=T("p"),t.innerHTML=i,e=E(),l=T("p"),l.textContent=r,a=E(),o=T("h1"),n=T("input"),f=E(),c=T("button"),c.textContent=d,p=E(),$(y.$$.fragment),A=E(),w.c(),b=j(),this.h()},l(u){t=k(u,"P",{"data-svelte-h":!0}),X(t)!=="svelte-7fpmfx"&&(t.innerHTML=i),e=I(u),l=k(u,"P",{"data-svelte-h":!0}),X(l)!=="svelte-1xqv7wa"&&(l.textContent=r),a=I(u),o=k(u,"H1",{});var m=x(o);n=k(m,"INPUT",{placeholder:!0}),f=I(m),c=k(m,"BUTTON",{id:!0,"data-svelte-h":!0}),X(c)!=="svelte-w2llk"&&(c.textContent=d),m.forEach(_),p=I(u),ee(y.$$.fragment,u),A=I(u),w.l(u),b=j(),this.h()},h(){P(n,"placeholder","enter desired domain"),P(c,"id","sum")},m(u,m){g(u,t,m),g(u,e,m),g(u,l,m),g(u,a,m),g(u,o,m),v(o,n),z(n,s[1]),v(o,f),v(o,c),g(u,p,m),te(y,u,m),g(u,A,m),w.m(u,m),g(u,b,m),q=!0,H||(B=[S(n,"input",s[4]),S(c,"click",s[3])],H=!0)},p(u,[m]){m&2&&n.value!==u[1]&&z(n,u[1]),m&4&&L(h,h=u[2])?(w.d(1),w=G(u),w.c(),w.m(b.parentNode,b)):w.p(u,m)},i(u){q||(ne(y.$$.fragment,u),q=!0)},o(u){le(y.$$.fragment,u),q=!1},d(u){u&&(_(t),_(e),_(l),_(a),_(o),_(p),_(A),_(b)),se(y,u),w.d(u),H=!1,Q(B)}}}let J="https://cloudflare-dns.com/dns-query?";function ue(s,t,i){let e="",l=0;const r=new Map;let a=["SOA","A","AAAA","TXT","MX","NS"];const o={_dmarc:"TXT",_spf:"TXT","_mta-sts":"TXT","_smtp._tls":"TXT"};async function n(){r.clear();for(const d of a)await fetch(J+"name="+e+"&type="+d,{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(r.set(d,p.Answer),console.log("setting",d))}).catch(p=>(console.log(p),[]));for(let d in o)await fetch(J+"name="+d+"."+e+"&type="+o[d],{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(r.set(d,p.Answer),console.log("setting",d))}).catch(p=>(console.log(p),[]));i(2,l++,l),console.log("returning.")}function f(){e=this.value,i(1,e)}return[r,e,l,n,f,()=>{var d;(d=document.getElementById("sum"))==null||d.click()}]}class he extends V{constructor(t){super(),W(this,t,ue,ie,L,{apiMap:0})}get apiMap(){return this.$$.ctx[0]}}export{he as component};
