import{s as ae,n as E,O as L,A as we,P as Ce,Q as he,e as I,a as D,c as O,b as X,R as te,g as R,f as w,v as M,i as q,h as y,S as pe,k as Be,r as Ee,p as $,T as ke,t as Q,d as W}from"../chunks/scheduler.Cjm7oeRm.js";import{S as Se,i as Te,b as De,d as Re,m as Le,t as qe,a as Fe,e as Ke}from"../chunks/index.BJ1bddpV.js";import{g as Xe}from"../chunks/entry.f_wXcujF.js";import{p as He}from"../chunks/stores.xo3Q6kSy.js";function ee(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function xe(e){let t,r;return{c:E,l:E,m(n,o){t||(r=[L(document.body,"keyup",e[8]),L(document.body,"keyup",e[10]),L(document.body,"keydown",e[9]),L(document.body,"keydown",e[11])],t=!0)},p:E,i:E,o:E,d(n){t=!1,we(r)}}}function Ye(e,t,r){let n,o,{paused:c=!1}=t,{pauseOnInput:s=!1}=t,{separator:a="-"}=t;const u=Ce();let l=[],i=[];function k(d){he.call(this,e,d)}function b(d){he.call(this,e,d)}const B=({key:d})=>{r(4,i=i.filter(f=>f!==d)),!(i.length>0)&&r(2,l=[])},P=({key:d,target:f})=>{s&&f.tagName!=="BODY"||(r(4,i=[...i,d]),c||(d in o?u("combo",n):r(2,l=[...l,d]),u(d===" "?"Space":d),u("key",d)))};return e.$$set=d=>{"paused"in d&&r(0,c=d.paused),"pauseOnInput"in d&&r(1,s=d.pauseOnInput),"separator"in d&&r(7,a=d.separator)},e.$$.update=()=>{e.$$.dirty&132&&r(3,n=l.join(a)),e.$$.dirty&4&&r(5,o=l.reduce((d,f)=>({...d,[f]:!0}),{})),e.$$.dirty&12&&l.length>0&&u("combo",n)},[c,s,l,n,i,o,u,a,k,b,B,P]}class ze extends Se{constructor(t){super(),Te(this,t,Ye,xe,ae,{paused:0,pauseOnInput:1,separator:7})}}var se={},j={},N={};Object.defineProperty(N,"__esModule",{value:!0});N.throwUnsupportedData=N.throwUnknownDataType=N.getType=void 0;function Ie(e){return Object.prototype.toString.call(e)}N.getType=Ie;function Je(e){throw new TypeError("unsupported data type: "+Ie(e))}N.throwUnknownDataType=Je;function Ge(e){throw new TypeError("unsupported data type: "+e)}N.throwUnsupportedData=Ge;var _={},m={};Object.defineProperty(m,"__esModule",{value:!0});m.s_to_num=m.int_str_to_s=m.num_to_s=m.big_int_to_s=m.int_to_s=m.s_to_big_int=m.s_to_int=void 0;let A="";for(let e=0;e<10;e++){const t=String.fromCharCode(48+e);A+=t}for(let e=0;e<26;e++){const t=String.fromCharCode(65+e);A+=t}for(let e=0;e<26;e++){const t=String.fromCharCode(97+e);A+=t}const F=A.length,ie={};for(let e=0;e<F;e++){const t=A[e];ie[t]=e}function le(e){let t=0,r=1;for(let n=e.length-1;n>=0;n--){const o=e[n];let c=ie[o];c*=r,t+=c,r*=F}return t}m.s_to_int=le;function Oe(e){let t=BigInt(0),r=BigInt(1);const n=BigInt(F);for(let o=e.length-1;o>=0;o--){const c=e[o];let s=BigInt(ie[c]);s*=r,t+=s,r*=n}return t}m.s_to_big_int=Oe;function de(e){if(e===0)return A[0];const t=[];for(;e!==0;){const r=e%F,n=A[r];t.push(n),e-=r,e/=F}return t.reverse().join("")}m.int_to_s=de;function Me(e){const t=BigInt(0),r=BigInt(F);if(e===t)return A[0];const n=[];for(;e!==t;){const o=e%r,c=A[Number(o)];n.push(c),e/=r}return n.reverse().join("")}m.big_int_to_s=Me;function je(e){return e.split("").reverse().join("")}function Ne(e){if(e<0)return"-"+Ne(-e);let[t,r]=e.toString().split(".");if(!r)if(t.includes("e")){const[c,s]=t.split("e");t=c,r="0e"+s}else return de(e);let n;r&&([r,n]=r.split("e")),t=Z(t),r=je(r),r=Z(r);let o=t+"."+r;if(n){switch(o+=".",n[0]){case"+":n=n.slice(1);break;case"-":o+="-",n=n.slice(1);break}n=Z(n),o+=n}return o}m.num_to_s=Ne;function Z(e){const t=+e;return t.toString()===e&&t+1!==t&&t-1!==t?de(t):":"+Me(BigInt(e))}m.int_str_to_s=Z;function ne(e){return e[0]===":"?Oe(e.substring(1)).toString():le(e).toString()}function Ae(e){if(e[0]==="-")return-Ae(e.substr(1));let[t,r,n]=e.split(".");if(!r)return le(t);t=ne(t),r=ne(r),r=je(r);let o=t+"."+r;if(n){o+="e";let c=!1;n[0]==="-"&&(c=!0,n=n.slice(1)),n=ne(n),o+=c?-n:+n}return+o}m.s_to_num=Ae;Object.defineProperty(_,"__esModule",{value:!0});_.decodeStr=_.encodeStr=_.decodeBool=_.encodeBool=_.decodeKey=_.decodeNum=_.encodeNum=void 0;const fe=m;function Qe(e){return"n|"+(0,fe.num_to_s)(e)}_.encodeNum=Qe;function We(e){return e=e.replace("n|",""),(0,fe.s_to_num)(e)}_.decodeNum=We;function Ze(e){return typeof e=="number"?e:(0,fe.s_to_int)(e)}_.decodeKey=Ze;function $e(e){return e?"b|T":"b|F"}_.encodeBool=$e;function et(e){switch(e){case"b|T":return!0;case"b|F":return!1}return!!e}_.decodeBool=et;function tt(e){switch(e[0]+e[1]){case"b|":case"o|":case"n|":case"a|":case"s|":e="s|"+e}return e}_.encodeStr=tt;function nt(e){return e[0]+e[1]==="s|"?e.substr(2):e}_.decodeStr=nt;var v={},Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.config=void 0;Y.config={sort_key:!1,error_on_nan:!1,error_on_infinite:!1};Object.defineProperty(v,"__esModule",{value:!0});v.addValue=v.makeInMemoryMemory=v.makeInMemoryCache=v.makeInMemoryStore=v.memToValues=void 0;const ue=Y,re=N,oe=_,rt=m;function ot(e){return e.store.toArray()}v.memToValues=ot;function Ue(){const e=[];return{forEach(t){for(let r=0;r<e.length;r++)if(t(e[r])==="break")return},add(t){e.push(t)},toArray(){return e}}}v.makeInMemoryStore=Ue;function Pe(){const e=Object.create(null),t=Object.create(null);return{getValue(r){return e[r]},getSchema(r){return t[r]},forEachValue(r){for(const[n,o]of Object.entries(e))if(r(n,o)==="break")return},forEachSchema(r){for(const[n,o]of Object.entries(t))if(r(n,o)==="break")return},setValue(r,n){e[r]=n},setSchema(r,n){t[r]=n},hasValue(r){return r in e},hasSchema(r){return r in t}}}v.makeInMemoryCache=Pe;function ct(){return{store:Ue(),cache:Pe(),keyCount:0}}v.makeInMemoryMemory=ct;function C(e,t){if(e.cache.hasValue(t))return e.cache.getValue(t);const r=e.keyCount++,n=(0,rt.num_to_s)(r);return e.store.add(t),e.cache.setValue(t,n),n}function st(e,t){ue.config.sort_key&&t.sort();const r=t.join(",");if(e.cache.hasSchema(r))return e.cache.getSchema(r);const n=H(e,t,void 0);return e.cache.setSchema(r,n),n}function H(e,t,r){if(t===null)return"";switch(typeof t){case"undefined":if(Array.isArray(r))return H(e,null,r);break;case"object":if(t===null)return C(e,null);if(Array.isArray(t)){let n="a";for(let o=0;o<t.length;o++){const c=t[o],s=c===null?"_":H(e,c,t);n+="|"+s}return n==="a"&&(n="a|"),C(e,n)}else{const n=Object.keys(t);if(n.length===0)return C(e,"o|");let o="o";const c=st(e,n);o+="|"+c;for(const s of n){const a=t[s],u=H(e,a,t);o+="|"+u}return C(e,o)}case"boolean":return C(e,(0,oe.encodeBool)(t));case"number":return Number.isNaN(t)?(ue.config.error_on_nan&&(0,re.throwUnsupportedData)("[number NaN]"),""):Number.POSITIVE_INFINITY===t||Number.NEGATIVE_INFINITY===t?(ue.config.error_on_infinite&&(0,re.throwUnsupportedData)("[number Infinity]"),""):C(e,(0,oe.encodeNum)(t));case"string":return C(e,(0,oe.encodeStr)(t))}return(0,re.throwUnknownDataType)(t)}v.addValue=H;Object.defineProperty(j,"__esModule",{value:!0});j.decompress=j.decode=j.compress=void 0;const ut=N,G=_,ce=v;function at(e){const t=(0,ce.makeInMemoryMemory)(),r=(0,ce.addValue)(t,e,void 0);return[(0,ce.memToValues)(t),r]}j.compress=at;function it(e,t){if(t==="o|")return{};const r={},n=t.split("|"),o=n[1];let c=x(e,o);const s=n.length;s-2===1&&!Array.isArray(c)&&(c=[c]);for(let a=2;a<s;a++){const u=c[a-2];let l=n[a];l=x(e,l),r[u]=l}return r}function lt(e,t){if(t==="a|")return[];const r=t.split("|"),n=r.length-1,o=new Array(n);for(let c=0;c<n;c++){let s=r[c+1];s=x(e,s),o[c]=s}return o}function x(e,t){if(t===""||t==="_")return null;const r=(0,G.decodeKey)(t),n=e[r];if(n===null)return n;switch(typeof n){case"undefined":return n;case"number":return n;case"string":switch(n[0]+n[1]){case"b|":return(0,G.decodeBool)(n);case"o|":return it(e,n);case"n|":return(0,G.decodeNum)(n);case"a|":return lt(e,n);default:return(0,G.decodeStr)(n)}}return(0,ut.throwUnknownDataType)(n)}j.decode=x;function dt(e){const[t,r]=e;return x(t,r)}j.decompress=dt;var K={};Object.defineProperty(K,"__esModule",{value:!0});K.trimUndefinedRecursively=K.trimUndefined=void 0;function ft(e){for(const t in e)e[t]===void 0&&delete e[t]}K.trimUndefined=ft;function ht(e){Ve(e,new Set)}K.trimUndefinedRecursively=ht;function Ve(e,t){t.add(e);for(const r in e)if(e[r]===void 0)delete e[r];else{const n=e[r];n&&typeof n=="object"&&!t.has(n)&&Ve(n,t)}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.config=e.trimUndefinedRecursively=e.trimUndefined=e.addValue=e.decode=e.decompress=e.compress=void 0;var t=j;Object.defineProperty(e,"compress",{enumerable:!0,get:function(){return t.compress}}),Object.defineProperty(e,"decompress",{enumerable:!0,get:function(){return t.decompress}});var r=j;Object.defineProperty(e,"decode",{enumerable:!0,get:function(){return r.decode}});var n=v;Object.defineProperty(e,"addValue",{enumerable:!0,get:function(){return n.addValue}});var o=K;Object.defineProperty(e,"trimUndefined",{enumerable:!0,get:function(){return o.trimUndefined}}),Object.defineProperty(e,"trimUndefinedRecursively",{enumerable:!0,get:function(){return o.trimUndefinedRecursively}});var c=Y;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return c.config}})})(se);function _e(e,t,r){const n=e.slice();return n[13]=t[r][0],n[14]=t[r][1],n}function me(e,t,r){const n=e.slice();return n[17]=t[r],n}function ge(e){let t,r=e[17].TTL+"",n,o,c=e[17].data+"",s;return{c(){t=I("li"),n=Q(r),o=Q(", "),s=Q(c),this.h()},l(a){t=O(a,"LI",{class:!0});var u=X(t);n=W(u,r),o=W(u,", "),s=W(u,c),u.forEach(w),this.h()},h(){M(t,"class","svelte-9xbp36")},m(a,u){q(a,t,u),y(t,n),y(t,o),y(t,s)},p:E,d(a){a&&w(t)}}}function ye(e){let t,r=e[13]+"",n,o,c,s=ee(e[14]),a=[];for(let u=0;u<s.length;u+=1)a[u]=ge(me(e,s,u));return{c(){t=I("h1"),n=Q(r),o=D();for(let u=0;u<a.length;u+=1)a[u].c();c=$(),this.h()},l(u){t=O(u,"H1",{class:!0});var l=X(t);n=W(l,r),l.forEach(w),o=R(u);for(let i=0;i<a.length;i+=1)a[i].l(u);c=$(),this.h()},h(){M(t,"class","svelte-9xbp36")},m(u,l){q(u,t,l),y(t,n),q(u,o,l);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(u,l);q(u,c,l)},p(u,l){if(l&1){s=ee(u[14]);let i;for(i=0;i<s.length;i+=1){const k=me(u,s,i);a[i]?a[i].p(k,l):(a[i]=ge(k),a[i].c(),a[i].m(c.parentNode,c))}for(;i<a.length;i+=1)a[i].d(1);a.length=s.length}},d(u){u&&(w(t),w(o),w(c)),ke(a,u)}}}function be(e){let t,r=ee([...e[0]]),n=[];for(let o=0;o<r.length;o+=1)n[o]=ye(_e(e,r,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=$()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);t=$()},m(o,c){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(o,c);q(o,t,c)},p(o,c){if(c&1){r=ee([...o[0]]);let s;for(s=0;s<r.length;s+=1){const a=_e(o,r,s);n[s]?n[s].p(a,c):(n[s]=ye(a),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(o){o&&w(t),ke(n,o)}}}function pt(e){let t,r,n,o='This site is built with Svelte as a playground project, which sends request to a DoH server. <a href="https://github.com/richardevs/dns-spa" target="_blank">Source</a>',c,s,a="It queries the common record types for the domain. Format: TTL, value",u,l,i,k,b,B="Summarize",P,d,f,h=e[2],p,V,z;d=new ze({}),d.$on("Enter",e[6]);let T=be(e);return{c(){t=I("div"),r=I("div"),n=I("p"),n.innerHTML=o,c=D(),s=I("p"),s.textContent=a,u=D(),l=I("h1"),i=I("input"),k=D(),b=I("button"),b.textContent=B,P=D(),De(d.$$.fragment),f=D(),T.c(),this.h()},l(g){t=O(g,"DIV",{class:!0});var U=X(t);r=O(U,"DIV",{class:!0});var S=X(r);n=O(S,"P",{"data-svelte-h":!0}),te(n)!=="svelte-2mkrq9"&&(n.innerHTML=o),c=R(S),s=O(S,"P",{"data-svelte-h":!0}),te(s)!=="svelte-e6nsjt"&&(s.textContent=a),u=R(S),l=O(S,"H1",{class:!0});var J=X(l);i=O(J,"INPUT",{placeholder:!0,class:!0}),k=R(J),b=O(J,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),te(b)!=="svelte-w2llk"&&(b.textContent=B),J.forEach(w),P=R(S),Re(d.$$.fragment,S),f=R(S),T.l(S),S.forEach(w),U.forEach(w),this.h()},h(){M(i,"placeholder","enter desired domain"),M(i,"class","svelte-9xbp36"),M(b,"id","sum"),M(b,"class","svelte-9xbp36"),M(l,"class","svelte-9xbp36"),M(r,"class","card svelte-9xbp36"),M(t,"class","container svelte-9xbp36")},m(g,U){q(g,t,U),y(t,r),y(r,n),y(r,c),y(r,s),y(r,u),y(r,l),y(l,i),pe(i,e[1]),y(l,k),y(l,b),y(r,P),Le(d,r,null),y(r,f),T.m(r,null),p=!0,V||(z=[L(i,"input",e[5]),L(b,"click",e[3])],V=!0)},p(g,[U]){U&2&&i.value!==g[1]&&pe(i,g[1]),U&4&&ae(h,h=g[2])?(T.d(1),T=be(g),T.c(),T.m(r,null)):T.p(g,U)},i(g){p||(qe(d.$$.fragment,g),p=!0)},o(g){Fe(d.$$.fragment,g),p=!1},d(g){g&&w(t),Ke(d),T.d(g),V=!1,we(z)}}}let ve="https://dns.google/resolve?";function _t(e,t,r){let n;Be(e,He,f=>r(4,n=f));let o="",c=0;const s=new Map;function a(f){const h=se.compress(f);return btoa(JSON.stringify(h)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function u(f){try{const h=f.replace(/-/g,"+").replace(/_/g,"/").padEnd(f.length+(4-f.length%4)%4,"="),p=atob(h),V=JSON.parse(p);return se.decompress(V)}catch(h){return console.error("Failed to decode results:",h),{}}}function l(){{const f=n.url.searchParams.get("query"),h=n.url.searchParams.get("results");if(f&&(r(1,o=f),h))try{const p=u(h);s.clear();for(const[V,z]of Object.entries(p))s.set(V,z);r(2,c++,c)}catch(p){console.error("Failed to parse results:",p)}}}let i;Ee(()=>{l(),i=async f=>{const h=new URL(window.location.href);h.searchParams.set("query",o),f&&h.searchParams.set("results",a(f)),await Xe(h.toString(),{replaceState:!1})}});let k=["SOA","A","AAAA","TXT","MX","NS","CAA"];const b={_dmarc:"TXT",_spf:"TXT","mta-sts":"A","_mta-sts":"TXT","_smtp._tls":"TXT","google._domainkey":"TXT"};async function B(){s.clear();const f={};for(const h of k)await fetch(ve+"name="+o+"&type="+h,{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(s.set(h,p.Answer),f[h]=p.Answer,console.log("setting",h))}).catch(p=>(console.log(p),[]));for(let h in b)await fetch(ve+"name="+h+"."+o+"&type="+b[h],{headers:{accept:"application/dns-json"}}).then(p=>p.json()).then(p=>{p.Answer&&(s.set(h,p.Answer),f[h]=p.Answer,console.log("setting",h))}).catch(p=>(console.log(p),[]));r(2,c++,c),await i(f)}function P(){o=this.value,r(1,o)}const d=()=>{var f;(f=document.getElementById("sum"))==null||f.click()};return e.$$.update=()=>{e.$$.dirty&16&&(n.url.search,l())},[s,o,c,B,n,P,d]}class vt extends Se{constructor(t){super(),Te(this,t,_t,pt,ae,{apiMap:0})}get apiMap(){return this.$$.ctx[0]}}export{vt as component};
